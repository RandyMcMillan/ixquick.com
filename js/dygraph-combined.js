/*! @license Copyright 2011 Dan Vanderkam (danvdk@gmail.com) MIT-licensed (http://opensource.org/licenses/MIT) */
;"use strict";var DygraphLayout=function(b){this.dygraph_=b;this.datasets=[];this.setNames=[];this.annotations=[];this.yAxes_=null;this.points=null;this.xTicks_=null;this.yTicks_=null};DygraphLayout.prototype.attr_=function(b){return this.dygraph_.attr_(b)};DygraphLayout.prototype.addDataset=function(d,c){this.datasets.push(c);this.setNames.push(d)};DygraphLayout.prototype.getPlotArea=function(){return this.computePlotArea_()};DygraphLayout.prototype.computePlotArea_=function(){var d={x:0,y:0};d.w=this.dygraph_.width_-d.x-this.attr_("rightGap");d.h=this.dygraph_.height_;var c={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(b){var a={x:d.x,y:d.y,w:b,h:d.h};d.x+=b;d.w-=b;return a},reserveSpaceRight:function(b){var a={x:d.x+d.w-b,y:d.y,w:b,h:d.h};d.w-=b;return a},reserveSpaceTop:function(b){var a={x:d.x,y:d.y,w:d.w,h:b};d.y+=b;d.h-=b;return a},reserveSpaceBottom:function(b){var a={x:d.x,y:d.y+d.h-b,w:d.w,h:b};d.h-=b;return a},chartRect:function(){return{x:d.x,y:d.y,w:d.w,h:d.h}}};this.dygraph_.cascadeEvents_("layout",c);if(this.attr_("showRangeSelector")){d.h-=this.attr_("rangeSelectorHeight")+4}return d};DygraphLayout.prototype.setAnnotations=function(g){this.annotations=[];var f=this.attr_("xValueParser")||function(b){return b};for(var h=0;h<g.length;h++){var a={};if(!g[h].xval&&!g[h].x){this.dygraph_.error("Annotations must have an 'x' property");return}if(g[h].icon&&!(g[h].hasOwnProperty("width")&&g[h].hasOwnProperty("height"))){this.dygraph_.error("Must set width and height when setting annotation.icon property");return}Dygraph.update(a,g[h]);if(!a.xval){a.xval=f(a.x)}this.annotations.push(a)}};DygraphLayout.prototype.setXTicks=function(b){this.xTicks_=b};DygraphLayout.prototype.setYAxes=function(b){this.yAxes_=b};DygraphLayout.prototype.setDateWindow=function(b){this.dateWindow_=b};DygraphLayout.prototype.evaluate=function(){this._evaluateLimits();this._evaluateLineCharts();this._evaluateLineTicks();this._evaluateAnnotations()};DygraphLayout.prototype._evaluateLimits=function(){this.minxval=this.maxxval=null;if(this.dateWindow_){this.minxval=this.dateWindow_[0];this.maxxval=this.dateWindow_[1]}else{for(var i=0;i<this.datasets.length;++i){var k=this.datasets[i];if(k.length>1){var g=k[0][0];if(!this.minxval||g<this.minxval){this.minxval=g}var h=k[k.length-1][0];if(!this.maxxval||h>this.maxxval){this.maxxval=h}}}}this.xrange=this.maxxval-this.minxval;this.xscale=(this.xrange!==0?1/this.xrange:1);for(var l=0;l<this.yAxes_.length;l++){var j=this.yAxes_[l];j.minyval=j.computedValueRange[0];j.maxyval=j.computedValueRange[1];j.yrange=j.maxyval-j.minyval;j.yscale=(j.yrange!==0?1/j.yrange:1);if(j.g.attr_("logscale")){j.ylogrange=Dygraph.log10(j.maxyval)-Dygraph.log10(j.minyval);j.ylogscale=(j.ylogrange!==0?1/j.ylogrange:1);if(!isFinite(j.ylogrange)||isNaN(j.ylogrange)){j.g.error("axis "+l+" of graph at "+j.g+" can't be displayed in log scale for range ["+j.minyval+" - "+j.maxyval+"]")}}}};DygraphLayout._calcYNormal=function(d,c){if(d.logscale){return 1-((Dygraph.log10(c)-Dygraph.log10(d.minyval))*d.ylogscale)}else{return 1-((c-d.minyval)*d.yscale)}};DygraphLayout.prototype._evaluateLineCharts=function(){var v=this.attr_("connectSeparatedPoints");this.points=new Array(this.datasets.length);for(var y=0;y<this.datasets.length;y++){var t=this.datasets[y];var q=this.setNames[y];var w=this.dygraph_.axisPropertiesForSeries(q);var j=new Array(t.length);for(var s=0;s<t.length;s++){var n=t[s];var u=DygraphLayout.parseFloat_(n[0]);var p=DygraphLayout.parseFloat_(n[1]);var o=(u-this.minxval)*this.xscale;var r=DygraphLayout._calcYNormal(w,p);if(v&&n[1]===null){p=null}j[s]={x:o,y:r,xval:u,yval:p,name:q}}this.points[y]=j}};DygraphLayout.parseFloat_=function(b){if(b===null){return NaN}return b};DygraphLayout.prototype._evaluateLineTicks=function(){var k,l,g,i;this.xticks=[];for(k=0;k<this.xTicks_.length;k++){l=this.xTicks_[k];g=l.label;i=this.xscale*(l.v-this.minxval);if((i>=0)&&(i<=1)){this.xticks.push([i,g])}}this.yticks=[];for(k=0;k<this.yAxes_.length;k++){var j=this.yAxes_[k];for(var h=0;h<j.ticks.length;h++){l=j.ticks[h];g=l.label;i=this.dygraph_.toPercentYCoord(l.v,k);if((i>=0)&&(i<=1)){this.yticks.push([k,i,g])}}}};DygraphLayout.prototype.evaluateWithError=function(){this.evaluate();if(!(this.attr_("errorBars")||this.attr_("customBars"))){return}var u=0;for(var C=0;C<this.datasets.length;++C){var j=this.points[C];var v=0;var w=this.datasets[C];var s=this.setNames[C];var y=this.dygraph_.axisPropertiesForSeries(s);for(v=0;v<w.length;v++,u++){var i=w[v];var A=DygraphLayout.parseFloat_(i[0]);var r=DygraphLayout.parseFloat_(i[1]);if(A==j[v].xval&&r==j[v].yval){var t=DygraphLayout.parseFloat_(i[2]);var z=DygraphLayout.parseFloat_(i[3]);var q=r-t;var B=r+z;j[v].y_top=DygraphLayout._calcYNormal(y,q);j[v].y_bottom=DygraphLayout._calcYNormal(y,B)}}}};DygraphLayout.prototype._evaluateAnnotations=function(){var m;var j={};for(m=0;m<this.annotations.length;m++){var a=this.annotations[m];j[a.xval+","+a.series]=a}this.annotated_points=[];if(!this.annotations||!this.annotations.length){return}for(var i=0;i<this.points.length;i++){var l=this.points[i];for(m=0;m<l.length;m++){var k=l[m];var n=k.xval+","+k.name;if(n in j){k.annotation=j[n];this.annotated_points.push(k)}}}};DygraphLayout.prototype.removeAllDatasets=function(){delete this.datasets;delete this.setNames;delete this.setPointsLengths;delete this.setPointsOffsets;this.datasets=[];this.setNames=[];this.setPointsLengths=[];this.setPointsOffsets=[]};DygraphLayout.prototype.unstackPointAtIndex=function(j,k){var i=this.points[j][k];if(!i.yval){return i}var m={};for(var l in i){m[l]=i[l]}if(!this.attr_("stackedGraph")){return m}var n=this.points[j];for(var h=k+1;h<n.length;h++){if((n[h].xval==i.xval)&&n[h].yval){m.yval-=n[h].yval;break}}return m};"use strict";var DygraphCanvasRenderer=function(i,j,f,h){this.dygraph_=i;this.layout=h;this.element=j;this.elementContext=f;this.container=this.element.parentNode;this.height=this.element.height;this.width=this.element.width;if(!this.isIE&&!(DygraphCanvasRenderer.isSupported(this.element))){throw"Canvas is not supported."}this.area=h.getPlotArea();this.container.style.position="relative";this.container.style.width=this.width+"px";if(this.dygraph_.isUsingExcanvas_){this._createIEClipArea()}else{if(!Dygraph.isAndroid()){var g=this.dygraph_.canvas_ctx_;g.beginPath();g.rect(this.area.x,this.area.y,this.area.w,this.area.h);g.clip();g=this.dygraph_.hidden_ctx_;g.beginPath();g.rect(this.area.x,this.area.y,this.area.w,this.area.h);g.clip()}}};DygraphCanvasRenderer.prototype.attr_=function(d,c){return this.dygraph_.attr_(d,c)};DygraphCanvasRenderer.prototype.clear=function(){var d;if(this.isIE){try{if(this.clearDelay){this.clearDelay.cancel();this.clearDelay=null}d=this.elementContext}catch(c){return}}d=this.elementContext;d.clearRect(0,0,this.width,this.height)};DygraphCanvasRenderer.isSupported=function(h){var e=null;try{if(typeof(h)=="undefined"||h===null){e=document.createElement("canvas")}else{e=h}e.getContext("2d")}catch(j){var i=navigator.appVersion.match(/MSIE (\d\.\d)/);var g=(navigator.userAgent.toLowerCase().indexOf("opera")!=-1);if((!i)||(i[1]<6)||(g)){return false}return true}return true};DygraphCanvasRenderer.prototype.render=function(){this._updatePoints();this._renderLineChart()};DygraphCanvasRenderer.prototype._createIEClipArea=function(){var l="dygraph-clip-div";var m=this.dygraph_.graphDiv;for(var n=m.childNodes.length-1;n>=0;n--){if(m.childNodes[n].className==l){m.removeChild(m.childNodes[n])}}var p=document.bgColor;var o=this.dygraph_.graphDiv;while(o!=document){var j=o.currentStyle.backgroundColor;if(j&&j!="transparent"){p=j;break}o=o.parentNode}function i(a){if(a.w===0||a.h===0){return}var b=document.createElement("div");b.className=l;b.style.backgroundColor=p;b.style.position="absolute";b.style.left=a.x+"px";b.style.top=a.y+"px";b.style.width=a.w+"px";b.style.height=a.h+"px";m.appendChild(b)}var k=this.area;i({x:0,y:0,w:k.x,h:this.height});i({x:k.x,y:0,w:this.width-k.x,h:k.y});i({x:k.x+k.w,y:0,w:this.width-k.x-k.w,h:this.height});i({x:k.x,y:k.y+k.h,w:this.width-k.x,h:this.height-k.h-k.y})};DygraphCanvasRenderer._getIteratorPredicate=function(b){return b?DygraphCanvasRenderer._predicateThatSkipsEmptyPoints:null};DygraphCanvasRenderer._predicateThatSkipsEmptyPoints=function(c,d){return c[d].yval!==null};DygraphCanvasRenderer._drawStyledLine=function(y,E,t,e,A,s,B){var z=y.dygraph;var C=z.getOption("stepPlot");if(!Dygraph.isArrayLike(e)){e=null}var u=z.getOption("drawGapEdgePoints",y.setName);var r=y.points;var v=Dygraph.createIterator(r,0,r.length,DygraphCanvasRenderer._getIteratorPredicate(z.getOption("connectSeparatedPoints")));var w=e&&(e.length>=2);var g=y.drawingContext;g.save();if(w){g.installPattern(e)}var D=DygraphCanvasRenderer._drawSeries(y,v,t,B,A,u,C,E);DygraphCanvasRenderer._drawPointsOnLine(y,D,s,E,B);if(w){g.uninstallPattern()}g.restore()};DygraphCanvasRenderer._drawSeries=function(i,A,I,M,E,B,N,D){var R=null;var e=null;var K=null;var L;var F;var J=[];var O=true;var G=i.drawingContext;G.beginPath();G.strokeStyle=D;G.lineWidth=I;var Q=A.array_;var z=A.end_;var S=A.predicate_;for(var C=A.start_;C<z;C++){F=Q[C];if(S){while(C<z&&!S(Q,C)){C++}if(C==z){break}F=Q[C]}if(F.canvasy===null||F.canvasy!=F.canvasy){if(N&&R!==null){G.moveTo(prevX,prevY);G.lineTo(F.canvasx,prevY)}R=e=null}else{L=false;if(B||!R){A.nextIdx_=C;var H=A.next();K=A.hasNext?A.peek.canvasy:null;var P=K===null||K!=K;L=(!R&&P);if(B){if((!O&&!R)||(A.hasNext&&P)){L=true}}}if(R!==null){if(I){if(N){G.moveTo(R,e);G.lineTo(F.canvasx,e);R=F.canvasx}G.moveTo(R,e);G.lineTo(F.canvasx,F.canvasy)}}if(E||L){J.push([F.canvasx,F.canvasy])}R=F.canvasx;e=F.canvasy}O=false}G.stroke();return J};DygraphCanvasRenderer._drawPointsOnLine=function(l,k,n,o,m){var p=l.drawingContext;for(var e=0;e<k.length;e++){var j=k[e];p.save();n(l.dygraph,l.setName,p,j[0],j[1],o,m);p.restore()}};DygraphCanvasRenderer.prototype._updatePoints=function(){var h=this.layout.points;for(var j=h.length;j--;){var i=h[j];for(var f=i.length;f--;){var g=i[f];g.canvasx=this.area.w*g.x+this.area.x;g.canvasy=this.area.h*g.y+this.area.y}}};DygraphCanvasRenderer.prototype._renderLineChart=function(J,i){var I=i||this.elementContext;var z=this.attr_("errorBars")||this.attr_("customBars");var L=this.attr_("fillGraph");var D;var Q=this.layout.points;var p=this.layout.setNames;var F=p.length;this.colors=this.dygraph_.colorsMap_;var C=this.attr_("plotter");var K=C;if(!Dygraph.isArrayLike(K)){K=[K]}var O={};for(D=0;D<p.length;D++){var P=p[D];var j=this.attr_("plotter",P);if(j==C){continue}O[P]=j}for(D=0;D<K.length;D++){var A=K[D];var B=(D==K.length-1);for(var G=0;G<Q.length;G++){var P=p[G];if(J&&P!=J){continue}var E=Q[G];var M=A;if(P in O){if(B){M=O[P]}else{continue}}var H=this.colors[P];var N=this.dygraph_.getOption("strokeWidth",P);I.save();I.strokeStyle=H;I.lineWidth=N;M({points:E,setName:P,drawingContext:I,color:H,strokeWidth:N,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(P),plotArea:this.area,seriesIndex:G,seriesCount:Q.length,allSeriesPoints:Q});I.restore()}}};DygraphCanvasRenderer._Plotters={linePlotter:function(b){DygraphCanvasRenderer._linePlotter(b)},fillPlotter:function(b){DygraphCanvasRenderer._fillPlotter(b)},errorPlotter:function(b){DygraphCanvasRenderer._errorPlotter(b)}};DygraphCanvasRenderer._linePlotter=function(n){var o=n.dygraph;var m=n.setName;var l=n.strokeWidth;var r=o.getOption("strokeBorderWidth",m);var g=o.getOption("drawPointCallback",m)||Dygraph.Circles.DEFAULT;var e=o.getOption("strokePattern",m);var p=o.getOption("drawPoints",m);var q=o.getOption("pointSize",m);if(r&&l){DygraphCanvasRenderer._drawStyledLine(n,o.getOption("strokeBorderColor",m),l+2*r,e,p,g,q)}DygraphCanvasRenderer._drawStyledLine(n,n.color,l,e,p,g,q)};DygraphCanvasRenderer._errorPlotter=function(y){var z=y.dygraph;var g=z.getOption("errorBars")||z.getOption("customBars");if(!g){return}var G=z.getOption("fillGraph");if(G){z.warn("Can't use fillGraph option with error bars")}var K=y.setName;var E=y.drawingContext;var D=y.color;var C=z.getOption("fillAlpha",K);var I=z.getOption("stepPlot");var N=y.axis;var B=y.points;var A=Dygraph.createIterator(B,0,B.length,DygraphCanvasRenderer._getIteratorPredicate(z.getOption("connectSeparatedPoints")));var H;var J=NaN;var M=NaN;var L=[-1,-1];var w=N.yscale;var O=new RGBColor(D);var e="rgba("+O.r+","+O.g+","+O.b+","+C+")";E.fillStyle=e;E.beginPath();while(A.hasNext){var F=A.next();if(!Dygraph.isOK(F.y)){J=NaN;continue}if(I){H=[F.y_bottom,F.y_top];M=F.y}else{H=[F.y_bottom,F.y_top]}H[0]=y.plotArea.h*H[0]+y.plotArea.y;H[1]=y.plotArea.h*H[1]+y.plotArea.y;if(!isNaN(J)){if(I){E.moveTo(J,H[0])}else{E.moveTo(J,L[0])}E.lineTo(F.canvasx,H[0]);E.lineTo(F.canvasx,H[1]);if(I){E.lineTo(J,H[1])}else{E.lineTo(J,L[1])}E.closePath()}L=H;J=F.canvasx}E.fill()};DygraphCanvasRenderer._fillPlotter=function(O){var S=O.dygraph;if(!S.getOption("fillGraph")){return}if(O.seriesIndex!==0){return}var M=O.drawingContext;var P=O.plotArea;var ae=O.allSeriesPoints;var i=ae.length;var H=S.getLabels().slice(1);for(var T=H.length;T>=0;T--){if(!S.visibility()[T]){H.splice(T,1)}}var I=S.getOption("fillAlpha");var W=S.getOption("stepPlot");var ab=S.getOption("stackedGraph");var V=S.getColors();var U={};var ag;for(var Q=i-1;Q>=0;Q--){var Y=H[Q];var K=V[Q];var ac=S.axisPropertiesForSeries(Y);var ad=1+ac.minyval*ac.yscale;if(ad<0){ad=0}else{if(ad>1){ad=1}}ad=P.h*ad+P.y;var e=ae[Q];var g=Dygraph.createIterator(e,0,e.length,DygraphCanvasRenderer._getIteratorPredicate(S.getOption("connectSeparatedPoints")));var Z=NaN;var aa=[-1,-1];var R;var L=ac.yscale;var af=new RGBColor(K);var J="rgba("+af.r+","+af.g+","+af.b+","+I+")";M.fillStyle=J;M.beginPath();while(g.hasNext){var N=g.next();if(!Dygraph.isOK(N.y)){Z=NaN;continue}if(ab){ag=U[N.canvasx];var X;if(ag===undefined){X=ad}else{if(W){X=ag[0]}else{X=ag}}R=[N.canvasy,X];if(W){if(aa[0]===-1){U[N.canvasx]=[N.canvasy,ad]}else{U[N.canvasx]=[N.canvasy,aa[0]]}}else{U[N.canvasx]=N.canvasy}}else{R=[N.canvasy,ad]}if(!isNaN(Z)){M.moveTo(Z,aa[0]);if(W){M.lineTo(N.canvasx,aa[0]);if(ag){M.lineTo(N.canvasx,ag[1])}else{M.lineTo(N.canvasx,R[1])}}else{M.lineTo(N.canvasx,R[0]);M.lineTo(N.canvasx,R[1])}M.lineTo(Z,aa[1]);M.closePath()}aa=R;Z=N.canvasx}M.fill()}};"use strict";var Dygraph=function(g,h,e,f){if(f!==undefined){this.warn("Using deprecated four-argument dygraph constructor");this.__old_init__(g,h,e,f)}else{this.__init__(g,h,e)}};Dygraph.NAME="Dygraph";Dygraph.VERSION="1.2";Dygraph.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};Dygraph.toString=function(){return this.__repr__()};Dygraph.DEFAULT_ROLL_PERIOD=1;Dygraph.DEFAULT_WIDTH=480;Dygraph.DEFAULT_HEIGHT=320;Dygraph.ANIMATION_STEPS=10;Dygraph.ANIMATION_DURATION=200;Dygraph.numberValueFormatter=function(i,l,j,m){var g=l("sigFigs");if(g!==null){return Dygraph.floatFormat(i,g)}var k=l("digitsAfterDecimal");var n=l("maxNumberWidth");if(i!==0&&(Math.abs(i)>=Math.pow(10,n)||Math.abs(i)<Math.pow(10,-k))){return i.toExponential(k)}else{return""+Dygraph.round_(i,k)}};Dygraph.numberAxisLabelFormatter=function(f,g,h,e){return Dygraph.numberValueFormatter(f,h,e)};Dygraph.dateString_=function(o){var k=Dygraph.zeropad;var l=new Date(o);var n=""+l.getFullYear();var m=k(l.getMonth()+1);var j=k(l.getDate());var p="";var d=l.getHours()*3600+l.getMinutes()*60+l.getSeconds();if(d){p=" "+Dygraph.hmsString_(o)}return n+"/"+m+"/"+j+p};Dygraph.dateAxisFormatter=function(d,f){if(f>=Dygraph.DECADAL){return d.strftime("%Y")}else{if(f>=Dygraph.MONTHLY){return d.strftime("%b %y")}else{var e=d.getHours()*3600+d.getMinutes()*60+d.getSeconds()+d.getMilliseconds();if(e===0||f>=Dygraph.DAILY){return new Date(d.getTime()+3600*1000).strftime("%d%b")}else{return Dygraph.hmsString_(d.getTime())}}}};Dygraph.Plotters=DygraphCanvasRenderer._Plotters;Dygraph.DEFAULT_ATTRS={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:0.5,labelsDivWidth:250,labelsDivStyles:{},labelsSeparateLines:false,labelsShowZeroValues:true,labelsKMB:false,labelsKMG2:false,showLabelsOnHighlight:true,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,xAxisLabelWidth:50,yAxisLabelWidth:50,rightGap:5,showRoller:false,xValueParser:Dygraph.dateParser,delimiter:",",sigma:2,errorBars:false,fractions:false,wilsonInterval:true,customBars:false,fillGraph:false,fillAlpha:0.15,connectSeparatedPoints:false,stackedGraph:false,hideOverlayOnMouseOut:true,legend:"onmouseover",stepPlot:false,avoidMinZero:false,drawAxesAtZero:false,titleHeight:28,xLabelHeight:18,yLabelWidth:18,drawXAxis:true,drawYAxis:true,axisLineColor:"black",axisLineWidth:0.3,gridLineWidth:0.3,axisLabelColor:"black",axisLabelFont:"Arial",axisLabelWidth:50,drawYGrid:true,drawXGrid:true,gridLineColor:"rgb(128,128,128)",interactionModel:null,animatedZooms:false,showRangeSelector:false,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillColor:"#A7B1C4",plotter:[Dygraph.Plotters.fillPlotter,Dygraph.Plotters.errorPlotter,Dygraph.Plotters.linePlotter],axes:{x:{pixelsPerLabel:60,axisLabelFormatter:Dygraph.dateAxisFormatter,valueFormatter:Dygraph.dateString_,ticker:null},y:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,ticker:null},y2:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,ticker:null}}};Dygraph.HORIZONTAL=1;Dygraph.VERTICAL=2;Dygraph.PLUGINS=[];Dygraph.addedAnnotationCSS=false;Dygraph.prototype.__old_init__=function(i,k,j,g){if(j!==null){var h=["Date"];for(var l=0;l<j.length;l++){h.push(j[l])}Dygraph.update(g,{labels:h})}this.__init__(i,k,g)};Dygraph.prototype.__init__=function(A,y,q){if(/MSIE/.test(navigator.userAgent)&&!window.opera&&typeof(G_vmlCanvasManager)!="undefined"&&document.readyState!="complete"){var i=this;setTimeout(function(){i.__init__(A,y,q)},100);return}if(q===null||q===undefined){q={}}q=Dygraph.mapLegacyOptions_(q);if(!A){Dygraph.error("Constructing dygraph with a non-existent div!");return}this.isUsingExcanvas_=typeof(G_vmlCanvasManager)!="undefined";this.maindiv_=A;this.file_=y;this.rollPeriod_=q.rollPeriod||Dygraph.DEFAULT_ROLL_PERIOD;this.previousVerticalX_=-1;this.fractions_=q.fractions||false;this.dateWindow_=q.dateWindow||null;this.is_initial_draw_=true;this.annotations_=[];this.zoomed_x_=false;this.zoomed_y_=false;A.innerHTML="";if(A.style.width===""&&q.width){A.style.width=q.width+"px"}if(A.style.height===""&&q.height){A.style.height=q.height+"px"}if(A.style.height===""&&A.clientHeight===0){A.style.height=Dygraph.DEFAULT_HEIGHT+"px";if(A.style.width===""){A.style.width=Dygraph.DEFAULT_WIDTH+"px"}}this.width_=A.clientWidth;this.height_=A.clientHeight;if(q.stackedGraph){q.fillGraph=true}this.user_attrs_={};Dygraph.update(this.user_attrs_,q);this.attrs_={};Dygraph.updateDeep(this.attrs_,Dygraph.DEFAULT_ATTRS);this.boundaryIds_=[];this.setIndexByName_={};this.datasetIndex_=[];this.registeredEvents_=[];this.eventListeners_={};this.createInterface_();this.plugins_=[];for(var u=0;u<Dygraph.PLUGINS.length;u++){var s=Dygraph.PLUGINS[u];var v=new s();var r={plugin:v,events:{},options:{},pluginOptions:{}};var z=v.activate(this);for(var t in z){r.events[t]=z[t]}this.plugins_.push(r)}for(var u=0;u<this.plugins_.length;u++){var o=this.plugins_[u];for(var t in o.events){if(!o.events.hasOwnProperty(t)){continue}var p=o.events[t];var w=[o.plugin,p];if(!(t in this.eventListeners_)){this.eventListeners_[t]=[w]}else{this.eventListeners_[t].push(w)}}}this.start_()};Dygraph.prototype.cascadeEvents_=function(n,e){if(!n in this.eventListeners_){return true}var k={dygraph:this,cancelable:false,defaultPrevented:false,preventDefault:function(){if(!k.cancelable){throw"Cannot call preventDefault on non-cancelable event."}k.defaultPrevented=true},propagationStopped:false,stopPropagation:function(){k.propagationStopped=true}};Dygraph.update(k,e);var i=this.eventListeners_[n];if(i){for(var m=i.length-1;m>=0;m--){var l=i[m][0];var j=i[m][1];j.call(l,k);if(k.propagationStopped){break}}}return k.defaultPrevented};Dygraph.prototype.isZoomed=function(b){if(b==null){return this.zoomed_x_||this.zoomed_y_}if(b==="x"){return this.zoomed_x_}if(b==="y"){return this.zoomed_y_}throw"axis parameter is ["+b+"] must be null, 'x' or 'y'."};Dygraph.prototype.toString=function(){var d=this.maindiv_;var c=(d&&d.id)?d.id:d;return"[Dygraph "+c+"]"};Dygraph.prototype.attr_=function(k,h){var l=[];l.push(this.attrs_);if(this.user_attrs_){l.push(this.user_attrs_);if(h){if(this.user_attrs_.hasOwnProperty(h)){l.push(this.user_attrs_[h])}if(h===this.highlightSet_&&this.user_attrs_.hasOwnProperty("highlightSeriesOpts")){l.push(this.user_attrs_.highlightSeriesOpts)}}}var g=null;for(var j=l.length-1;j>=0;--j){var i=l[j];if(i.hasOwnProperty(k)){g=i[k];break}}return g};Dygraph.prototype.getOption=function(d,c){return this.attr_(d,c)};Dygraph.prototype.optionsViewForAxis_=function(c){var d=this;return function(b){var a=d.user_attrs_.axes;if(a&&a[c]&&a[c][b]){return a[c][b]}if(typeof(d.user_attrs_[b])!="undefined"){return d.user_attrs_[b]}a=d.attrs_.axes;if(a&&a[c]&&a[c][b]){return a[c][b]}if(c=="y"&&d.axes_[0].hasOwnProperty(b)){return d.axes_[0][b]}else{if(c=="y2"&&d.axes_[1].hasOwnProperty(b)){return d.axes_[1][b]}}return d.attr_(b)}};Dygraph.prototype.rollPeriod=function(){return this.rollPeriod_};Dygraph.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()};Dygraph.prototype.xAxisExtremes=function(){var c=this.rawData_[0][0];var d=this.rawData_[this.rawData_.length-1][0];return[c,d]};Dygraph.prototype.yAxisRange=function(d){if(typeof(d)=="undefined"){d=0}if(d<0||d>=this.axes_.length){return null}var c=this.axes_[d];return[c.computedValueRange[0],c.computedValueRange[1]]};Dygraph.prototype.yAxisRanges=function(){var d=[];for(var c=0;c<this.axes_.length;c++){d.push(this.yAxisRange(c))}return d};Dygraph.prototype.toDomCoords=function(e,f,d){return[this.toDomXCoord(e),this.toDomYCoord(f,d)]};Dygraph.prototype.toDomXCoord=function(d){if(d===null){return null}var f=this.plotter_.area;var e=this.xAxisRange();return f.x+(d-e[0])/(e[1]-e[0])*f.w};Dygraph.prototype.toDomYCoord=function(g,f){var h=this.toPercentYCoord(g,f);if(h===null){return null}var e=this.plotter_.area;return e.y+h*e.h};Dygraph.prototype.toDataCoords=function(e,f,d){return[this.toDataXCoord(e),this.toDataYCoord(f,d)]};Dygraph.prototype.toDataXCoord=function(d){if(d===null){return null}var f=this.plotter_.area;var e=this.xAxisRange();return e[0]+(d-f.x)/f.w*(e[1]-e[0])};Dygraph.prototype.toDataYCoord=function(k,i){if(k===null){return null}var p=this.plotter_.area;var l=this.yAxisRange(i);if(typeof(i)=="undefined"){i=0}if(!this.axes_[i].logscale){return l[0]+(p.y+p.h-k)/p.h*(l[1]-l[0])}else{var m=(k-p.y)/p.h;var j=Dygraph.log10(l[1]);var n=j-(m*(j-Dygraph.log10(l[0])));var o=Math.pow(Dygraph.LOG_SCALE,n);return o}};Dygraph.prototype.toPercentYCoord=function(h,f){if(h===null){return null}if(typeof(f)=="undefined"){f=0}var i=this.yAxisRange(f);var j;if(!this.axes_[f].logscale){j=(i[1]-h)/(i[1]-i[0])}else{var g=Dygraph.log10(i[1]);j=(g-Dygraph.log10(h))/(g-Dygraph.log10(i[0]))}return j};Dygraph.prototype.toPercentXCoord=function(c){if(c===null){return null}var d=this.xAxisRange();return(c-d[0])/(d[1]-d[0])};Dygraph.prototype.numColumns=function(){return this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length};Dygraph.prototype.numRows=function(){return this.rawData_.length};Dygraph.prototype.fullXRange_=function(){if(this.numRows()>0){return[this.rawData_[0][0],this.rawData_[this.numRows()-1][0]]}else{return[0,1]}};Dygraph.prototype.getValue=function(c,d){if(c<0||c>this.rawData_.length){return null}if(d<0||d>this.rawData_[c].length){return null}return this.rawData_[c][d]};Dygraph.prototype.createInterface_=function(){var d=this.maindiv_;this.graphDiv=document.createElement("div");this.graphDiv.style.width=this.width_+"px";this.graphDiv.style.height=this.height_+"px";d.appendChild(this.graphDiv);this.canvas_=Dygraph.createCanvas();this.canvas_.style.position="absolute";this.canvas_.width=this.width_;this.canvas_.height=this.height_;this.canvas_.style.width=this.width_+"px";this.canvas_.style.height=this.height_+"px";this.canvas_ctx_=Dygraph.getContext(this.canvas_);this.hidden_=this.createPlotKitCanvas_(this.canvas_);this.hidden_ctx_=Dygraph.getContext(this.hidden_);if(this.attr_("showRangeSelector")){this.rangeSelector_=new DygraphRangeSelector(this)}this.graphDiv.appendChild(this.hidden_);this.graphDiv.appendChild(this.canvas_);this.mouseEventElement_=this.createMouseEventElement_();this.layout_=new DygraphLayout(this);if(this.rangeSelector_){this.rangeSelector_.addToGraph(this.graphDiv,this.layout_)}var c=this;this.mouseMoveHandler=function(a){c.mouseMove_(a)};this.addEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler);this.mouseOutHandler=function(a){c.mouseOut_(a)};this.addEvent(this.mouseEventElement_,"mouseout",this.mouseOutHandler);this.createDragInterface_();this.resizeHandler=function(a){c.resize()};this.addEvent(window,"resize",this.resizeHandler)};Dygraph.prototype.destroy=function(){var e=function(a){while(a.hasChildNodes()){e(a.firstChild);a.removeChild(a.firstChild)}};for(var f=0;f<this.registeredEvents_.length;f++){var g=this.registeredEvents_[f];Dygraph.removeEvent(g.elem,g.type,g.fn)}this.registeredEvents_=[];Dygraph.removeEvent(this.mouseEventElement_,"mouseout",this.mouseOutHandler);Dygraph.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler);Dygraph.removeEvent(this.mouseEventElement_,"mousemove",this.mouseUpHandler_);e(this.maindiv_);var h=function(b){for(var a in b){if(typeof(b[a])==="object"){b[a]=null}}};Dygraph.removeEvent(window,"resize",this.resizeHandler);this.resizeHandler=null;h(this.layout_);h(this.plotter_);h(this)};Dygraph.prototype.createPlotKitCanvas_=function(d){var c=Dygraph.createCanvas();c.style.position="absolute";c.style.top=d.style.top;c.style.left=d.style.left;c.width=this.width_;c.height=this.height_;c.style.width=this.width_+"px";c.style.height=this.height_+"px";return c};Dygraph.prototype.createMouseEventElement_=function(){if(this.isUsingExcanvas_){var b=document.createElement("div");b.style.position="absolute";b.style.backgroundColor="white";b.style.filter="alpha(opacity=0)";b.style.width=this.width_+"px";b.style.height=this.height_+"px";this.graphDiv.appendChild(b);return b}else{return this.canvas_}};Dygraph.prototype.setColors_=function(){var n=this.getLabels();var p=n.length-1;this.colors_=[];this.colorsMap_={};var t=this.attr_("colors");var q;if(!t){var r=this.attr_("colorSaturation")||1;var s=this.attr_("colorValue")||0.5;var i=Math.ceil(p/2);for(q=1;q<=p;q++){if(!this.visibility()[q-1]){continue}var m=q%2?Math.ceil(q/2):(i+q/2);var o=(1*m/(1+p));var l=Dygraph.hsvToRGB(o,r,s);this.colors_.push(l);this.colorsMap_[n[q]]=l}}else{for(q=0;q<p;q++){if(!this.visibility()[q]){continue}var l=t[q%t.length];this.colors_.push(l);this.colorsMap_[n[1+q]]=l}}};Dygraph.prototype.getColors=function(){return this.colors_};Dygraph.prototype.getPropertiesForSeries=function(h){var f=-1;var g=this.getLabels();for(var e=1;e<g.length;e++){if(g[e]==h){f=e;break}}if(f==-1){return null}return{name:h,column:f,visible:this.visibility()[f-1],color:this.colorsMap_[h],axis:1+this.seriesToAxisMap_[h]}};Dygraph.prototype.createRollInterface_=function(){if(!this.roller_){this.roller_=document.createElement("input");this.roller_.type="text";this.roller_.style.display="none";this.graphDiv.appendChild(this.roller_)}var h=this.attr_("showRoller")?"block":"none";var i=this.plotter_.area;var f={position:"absolute",zIndex:10,top:(i.y+i.h-25)+"px",left:(i.x+1)+"px",display:h};this.roller_.size="2";this.roller_.value=this.rollPeriod_;for(var g in f){if(f.hasOwnProperty(g)){this.roller_.style[g]=f[g]}}var j=this;this.roller_.onchange=function(){j.adjustRoll(j.roller_.value)}};Dygraph.prototype.dragGetX_=function(c,d){return Dygraph.pageX(c)-d.px};Dygraph.prototype.dragGetY_=function(c,d){return Dygraph.pageY(c)-d.py};Dygraph.prototype.createDragInterface_=function(){var j={isZooming:false,isPanning:false,is2DPan:false,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:false,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,initializeMouseDown:function(a,b,c){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false;a.cancelBubble=true}c.px=Dygraph.findPosX(b.canvas_);c.py=Dygraph.findPosY(b.canvas_);c.dragStartX=b.dragGetX_(a,c);c.dragStartY=b.dragGetY_(a,c);c.cancelNextDblclick=false}};var h=this.attr_("interactionModel");var f=this;var i=function(a){return function(b){a(b,f,j)}};for(var g in h){if(!h.hasOwnProperty(g)){continue}this.addEvent(this.mouseEventElement_,g,i(h[g]))}this.mouseUpHandler_=function(a){if(j.isZooming||j.isPanning){j.isZooming=false;j.dragStartX=null;j.dragStartY=null}if(j.isPanning){j.isPanning=false;j.draggingDate=null;j.dateRange=null;for(var b=0;b<f.axes_.length;b++){delete f.axes_[b].draggingValue;delete f.axes_[b].dragValueRange}}};this.addEvent(document,"mouseup",this.mouseUpHandler_)};Dygraph.prototype.drawZoomRect_=function(n,p,j,q,l,r,m,o){var k=this.canvas_ctx_;if(r==Dygraph.HORIZONTAL){k.clearRect(Math.min(p,m),this.layout_.getPlotArea().y,Math.abs(p-m),this.layout_.getPlotArea().h)}else{if(r==Dygraph.VERTICAL){k.clearRect(this.layout_.getPlotArea().x,Math.min(q,o),this.layout_.getPlotArea().w,Math.abs(q-o))}}if(n==Dygraph.HORIZONTAL){if(j&&p){k.fillStyle="rgba(128,128,128,0.33)";k.fillRect(Math.min(p,j),this.layout_.getPlotArea().y,Math.abs(j-p),this.layout_.getPlotArea().h)}}else{if(n==Dygraph.VERTICAL){if(l&&q){k.fillStyle="rgba(128,128,128,0.33)";k.fillRect(this.layout_.getPlotArea().x,Math.min(q,l),this.layout_.getPlotArea().w,Math.abs(l-q))}}}if(this.isUsingExcanvas_){this.currentZoomRectArgs_=[n,p,j,q,l,0,0,0]}};Dygraph.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null;this.canvas_ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height)};Dygraph.prototype.doZoomX_=function(h,f){this.currentZoomRectArgs_=null;var e=this.toDataXCoord(h);var g=this.toDataXCoord(f);this.doZoomXDates_(e,g)};Dygraph.zoomAnimationFunction=function(f,d){var e=1.5;return(1-Math.pow(e,-f))/(1-Math.pow(e,-d))};Dygraph.prototype.doZoomXDates_=function(j,h){var g=this.xAxisRange();var i=[j,h];this.zoomed_x_=true;var f=this;this.doAnimatedZoom(g,i,null,null,function(){if(f.attr_("zoomCallback")){f.attr_("zoomCallback")(j,h,f.yAxisRanges())}})};Dygraph.prototype.doZoomY_=function(k,m){this.currentZoomRectArgs_=null;var p=this.yAxisRanges();var i=[];for(var n=0;n<this.axes_.length;n++){var o=this.toDataYCoord(k,n);var j=this.toDataYCoord(m,n);i.push([j,o])}this.zoomed_y_=true;var l=this;this.doAnimatedZoom(null,null,p,i,function(){if(l.attr_("zoomCallback")){var a=l.xAxisRange();l.attr_("zoomCallback")(a[0],a[1],l.yAxisRanges())}})};Dygraph.prototype.doUnzoom_=function(){var A=false,z=false,C=false;if(this.dateWindow_!==null){A=true;z=true}for(var v=0;v<this.axes_.length;v++){if(typeof(this.axes_[v].valueWindow)!=="undefined"&&this.axes_[v].valueWindow!==null){A=true;C=true}}this.clearSelection();if(A){this.zoomed_x_=false;this.zoomed_y_=false;var w=this.rawData_[0][0];var B=this.rawData_[this.rawData_.length-1][0];if(!this.attr_("animatedZooms")){this.dateWindow_=null;for(v=0;v<this.axes_.length;v++){if(this.axes_[v].valueWindow!==null){delete this.axes_[v].valueWindow}}this.drawGraph_();if(this.attr_("zoomCallback")){this.attr_("zoomCallback")(w,B,this.yAxisRanges())}return}var r=null,q=null,s=null,u=null;if(z){r=this.xAxisRange();q=[w,B]}if(C){s=this.yAxisRanges();var p=this.gatherDatasets_(this.rolledSeries_,null);var i=p[1];this.computeYAxisRanges_(i);u=[];for(v=0;v<this.axes_.length;v++){var y=this.axes_[v];u.push(y.valueRange!=null?y.valueRange:y.extremeRange)}}var t=this;this.doAnimatedZoom(r,q,s,u,function(){t.dateWindow_=null;for(var a=0;a<t.axes_.length;a++){if(t.axes_[a].valueWindow!==null){delete t.axes_[a].valueWindow}}if(t.attr_("zoomCallback")){t.attr_("zoomCallback")(w,B,t.yAxisRanges())}})}};Dygraph.prototype.doAnimatedZoom=function(A,v,z,y,o){var r=this.attr_("animatedZooms")?Dygraph.ANIMATION_STEPS:1;var p=[];var q=[];var u,w;if(A!==null&&v!==null){for(u=1;u<=r;u++){w=Dygraph.zoomAnimationFunction(u,r);p[u-1]=[A[0]*(1-w)+w*v[0],A[1]*(1-w)+w*v[1]]}}if(z!==null&&y!==null){for(u=1;u<=r;u++){w=Dygraph.zoomAnimationFunction(u,r);var j=[];for(var t=0;t<this.axes_.length;t++){j.push([z[t][0]*(1-w)+w*y[t][0],z[t][1]*(1-w)+w*y[t][1]])}q[u-1]=j}}var s=this;Dygraph.repeatAndCleanup(function(b){if(q.length){for(var c=0;c<s.axes_.length;c++){var a=q[b][c];s.axes_[c].valueWindow=[a[0],a[1]]}}if(p.length){s.dateWindow_=p[b]}s.drawGraph_()},r,Dygraph.ANIMATION_DURATION/r,o)};Dygraph.prototype.getArea=function(){return this.plotter_.area};Dygraph.prototype.eventToDomCoords=function(f){var d=Dygraph.pageX(f)-Dygraph.findPosX(this.mouseEventElement_);var e=Dygraph.pageY(f)-Dygraph.findPosY(this.mouseEventElement_);return[d,e]};Dygraph.prototype.findClosestRow=function(u){var n=Infinity;var s=-1,v=-1;var p=this.layout_.points;for(var r=0;r<p.length;r++){var i=p[r];var q=i.length;for(var t=0;t<q;t++){var j=i[t];if(!Dygraph.isValidPoint(j,true)){continue}var o=Math.abs(j.canvasx-u);if(o<n){n=o;v=r;s=t}}}return this.idxToRow_(v,s)};Dygraph.prototype.findClosestPoint=function(w,y){var t=Infinity;var s=-1;var u,i,p,r,z,A;for(var B=0;B<this.layout_.datasets.length;++B){var q=this.layout_.points[B];for(var v=0;v<q.length;++v){var r=q[v];if(!Dygraph.isValidPoint(r)){continue}i=r.canvasx-w;p=r.canvasy-y;u=i*i+p*p;if(u<t){t=u;z=r;A=B;s=v}}}var C=this.layout_.setNames[A];return{row:s+this.getLeftBoundary_(),seriesName:C,point:z}};Dygraph.prototype.findStackedPoint=function(A,B){var r=this.findClosestRow(A);var C=this.getLeftBoundary_();var E=r-C;var z=this.layout_.points;var D,F;for(var G=0;G<this.layout_.datasets.length;++G){var v=this.layout_.points[G];if(E>=v.length){continue}var u=v[E];if(!Dygraph.isValidPoint(u)){continue}var y=u.canvasy;if(A>u.canvasx&&E+1<v.length){var w=v[E+1];if(Dygraph.isValidPoint(w)){var s=w.canvasx-u.canvasx;if(s>0){var I=(A-u.canvasx)/s;y+=I*(w.canvasy-u.canvasy)}}}else{if(A<u.canvasx&&E>0){var t=v[E-1];if(Dygraph.isValidPoint(t)){var s=u.canvasx-t.canvasx;if(s>0){var I=(u.canvasx-A)/s;y+=I*(t.canvasy-u.canvasy)}}}}if(G==0||y<B){D=u;F=G}}var H=this.layout_.setNames[F];return{row:r,seriesName:H,point:D}};Dygraph.prototype.mouseMove_=function(s){var m=this.layout_.points;if(m===undefined||m===null){return}var p=this.eventToDomCoords(s);var t=p[0];var k=p[1];var o=this.attr_("highlightSeriesOpts");var q=false;if(o&&!this.lockedSet_){var r;if(this.attr_("stackedGraph")){r=this.findStackedPoint(t,k)}else{r=this.findClosestPoint(t,k)}q=this.setSelection(r.row,r.seriesName)}else{var n=this.findClosestRow(t);q=this.setSelection(n)}var l=this.attr_("highlightCallback");if(l&&q){l(s,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}};Dygraph.prototype.getLeftBoundary_=function(){for(var b=0;b<this.boundaryIds_.length;b++){if(this.boundaryIds_[b]!==undefined){return this.boundaryIds_[b][0]}}return 0};Dygraph.prototype.idxToRow_=function(d,e){if(e<0){return -1}var f=this.getLeftBoundary_();return f+e};Dygraph.prototype.animateSelection_=function(k){var l=10;var n=30;if(this.fadeLevel===undefined){this.fadeLevel=0}if(this.animateId===undefined){this.animateId=0}var j=this.fadeLevel;var h=k<0?j:l-j;if(h<=0){if(this.fadeLevel){this.updateSelection_(1)}return}var i=++this.animateId;var m=this;Dygraph.repeatAndCleanup(function(a){if(m.animateId!=i){return}m.fadeLevel+=k;if(m.fadeLevel===0){m.clearSelection()}else{m.updateSelection_(m.fadeLevel/l)}},h,n,function(){})};Dygraph.prototype.updateSelection_=function(B){var t=this.cascadeEvents_("select",{selectedX:this.lastx_,selectedPoints:this.selPoints_});var w;var q=this.canvas_ctx_;if(this.attr_("highlightSeriesOpts")){q.clearRect(0,0,this.width_,this.height_);var z=1-this.attr_("highlightSeriesBackgroundAlpha");if(z){var y=true;if(y){if(B===undefined){this.animateSelection_(1);return}z*=B}q.fillStyle="rgba(255,255,255,"+z+")";q.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,q)}else{if(this.previousVerticalX_>=0){var v=0;var u=this.attr_("labels");for(w=1;w<u.length;w++){var C=this.attr_("highlightCircleSize",u[w]);if(C>v){v=C}}var s=this.previousVerticalX_;q.clearRect(s-v-1,0,2*v+2,this.height_)}}if(this.isUsingExcanvas_&&this.currentZoomRectArgs_){Dygraph.prototype.drawZoomRect_.apply(this,this.currentZoomRectArgs_)}if(this.selPoints_.length>0){var D=this.selPoints_[0].canvasx;q.save();for(w=0;w<this.selPoints_.length;w++){var i=this.selPoints_[w];if(!Dygraph.isOK(i.canvasy)){continue}var E=this.attr_("highlightCircleSize",i.name);var r=this.attr_("drawHighlightPointCallback",i.name);var A=this.plotter_.colors[i.name];if(!r){r=Dygraph.Circles.DEFAULT}q.lineWidth=this.attr_("strokeWidth",i.name);q.strokeStyle=A;q.fillStyle=A;r(this.g,i.name,q,D,i.canvasy,A,E)}q.restore();this.previousVerticalX_=D}};Dygraph.prototype.setSelection=function(m,j,k){this.selPoints_=[];if(m!==false){m-=this.getLeftBoundary_()}var n=false;if(m!==false&&m>=0){if(m!=this.lastRow_){n=true}this.lastRow_=m;for(var h=0;h<this.layout_.datasets.length;++h){var l=this.layout_.datasets[h];if(m<l.length){var i=this.layout_.points[h][m];if(this.attr_("stackedGraph")){i=this.layout_.unstackPointAtIndex(h,m)}if(!(i.yval===null)){this.selPoints_.push(i)}}}}else{if(this.lastRow_>=0){n=true}this.lastRow_=-1}if(this.selPoints_.length){this.lastx_=this.selPoints_[0].xval}else{this.lastx_=-1}if(j!==undefined){if(this.highlightSet_!==j){n=true}this.highlightSet_=j}if(k!==undefined){this.lockedSet_=k}if(n){this.updateSelection_(undefined)}return n};Dygraph.prototype.mouseOut_=function(b){if(this.attr_("unhighlightCallback")){this.attr_("unhighlightCallback")(b)}if(this.attr_("hideOverlayOnMouseOut")&&!this.lockedSet_){this.clearSelection()}};Dygraph.prototype.clearSelection=function(){this.cascadeEvents_("deselect",{});this.lockedSet_=false;if(this.fadeLevel){this.animateSelection_(-1);return}this.canvas_ctx_.clearRect(0,0,this.width_,this.height_);this.fadeLevel=0;this.selPoints_=[];this.lastx_=-1;this.lastRow_=-1;this.highlightSet_=null};Dygraph.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1){return -1}for(var f=0;f<this.layout_.points.length;f++){var e=this.layout_.points[f];for(var d=0;d<e.length;d++){if(e[d].x==this.selPoints_[0].x){return d+this.getLeftBoundary_()}}}return -1};Dygraph.prototype.getHighlightSeries=function(){return this.highlightSet_};Dygraph.prototype.loadedEvent_=function(b){this.rawData_=this.parseCSV_(b);this.predraw_()};Dygraph.prototype.addXTicks_=function(){var e;if(this.dateWindow_){e=[this.dateWindow_[0],this.dateWindow_[1]]}else{e=this.fullXRange_()}var f=this.optionsViewForAxis_("x");var d=f("ticker")(e[0],e[1],this.width_,f,this);this.layout_.setXTicks(d)};Dygraph.prototype.extremeValues_=function(o){var k=null,m=null,p,l;var i=this.attr_("errorBars")||this.attr_("customBars");if(i){for(p=0;p<o.length;p++){l=o[p][1][0];if(!l){continue}var j=l-o[p][1][1];var n=l+o[p][1][2];if(j>l){j=l}if(n<l){n=l}if(m===null||n>m){m=n}if(k===null||j<k){k=j}}}else{for(p=0;p<o.length;p++){l=o[p][1];if(l===null||isNaN(l)){continue}if(m===null||l>m){m=l}if(k===null||l<k){k=l}}}return[k,m]};Dygraph.prototype.predraw_=function(){var h=new Date();this.computeYAxes_();if(this.plotter_){this.cascadeEvents_("clearChart");this.plotter_.clear()}this.plotter_=new DygraphCanvasRenderer(this,this.hidden_,this.hidden_ctx_,this.layout_);this.createRollInterface_();this.cascadeEvents_("predraw");if(this.rangeSelector_){this.rangeSelector_.renderStaticLayer()}this.rolledSeries_=[null];for(var j=1;j<this.numColumns();j++){var i=this.attr_("logscale",j);var f=this.extractSeries_(this.rawData_,j,i);f=this.rollingAverage(f,this.rollPeriod_);this.rolledSeries_.push(f)}this.drawGraph_();var g=new Date();this.drawingTimeMs_=(g-h)};Dygraph.prototype.gatherDatasets_=function(k,Q){var D=[];var R=[];var O=[];var S={};var B,C,E;var K=k.length-1;for(B=K;B>=1;B--){if(!this.visibility()[B-1]){continue}var L=[];for(C=0;C<k[B].length;C++){L.push(k[B][C])}var I=this.attr_("errorBars")||this.attr_("customBars");if(Q){var G=Q[0];var N=Q[1];var H=[];var P=null,i=null;for(E=0;E<L.length;E++){if(L[E][0]>=G&&P===null){P=E}if(L[E][0]<=N){i=E}}if(P===null){P=0}if(P>0){P--}if(i===null){i=L.length-1}if(i<L.length-1){i++}D[B-1]=[P,i];for(E=P;E<=i;E++){H.push(L[E])}L=H}else{D[B-1]=[0,L.length-1]}var J=this.extremeValues_(L);if(I){for(C=0;C<L.length;C++){L[C]=[L[C][0],L[C][1][0],L[C][1][1],L[C][1][2]]}}else{if(this.attr_("stackedGraph")){var F=L.length;var j;for(C=0;C<F;C++){var M=L[C][0];if(R[M]===undefined){R[M]=0}j=L[C][1];if(j===null){L[C]=[M,null];continue}R[M]+=j;L[C]=[M,R[M]];if(R[M]>J[1]){J[1]=R[M]}if(R[M]<J[0]){J[0]=R[M]}}}}var l=this.attr_("labels")[B];S[l]=J;O[B]=L}if(this.attr_("stackedGraph")){for(E=O.length-1;E>=0;--E){if(!O[E]){continue}for(C=0;C<O[E].length;C++){var M=O[E][C][0];if(isNaN(R[M])){for(B=O.length-1;B>=0;B--){if(!O[B]){continue}O[B][C][1]=NaN}}}break}}return[O,S,D]};Dygraph.prototype.drawGraph_=function(){var t=new Date();var p=this.is_initial_draw_;this.is_initial_draw_=false;this.layout_.removeAllDatasets();this.setColors_();this.attrs_.pointSize=0.5*this.attr_("highlightCircleSize");var l=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_);var q=l[0];var i=l[1];this.boundaryIds_=l[2];this.setIndexByName_={};var m=this.attr_("labels");if(m.length>0){this.setIndexByName_[m[0]]=0}var o=0;for(var n=1;n<q.length;n++){this.setIndexByName_[m[n]]=n;if(!this.visibility()[n-1]){continue}this.layout_.addDataset(m[n],q[n]);this.datasetIndex_[n]=o++}this.computeYAxisRanges_(i);this.layout_.setYAxes(this.axes_);this.addXTicks_();var s=this.zoomed_x_;this.layout_.setDateWindow(this.dateWindow_);this.zoomed_x_=s;this.layout_.evaluateWithError();this.renderGraph_(p);if(this.attr_("timingName")){var r=new Date();if(console){console.log(this.attr_("timingName")+" - drawGraph: "+(r-t)+"ms")}}};Dygraph.prototype.renderGraph_=function(d){this.cascadeEvents_("clearChart");this.plotter_.clear();if(this.attr_("underlayCallback")){this.attr_("underlayCallback")(this.hidden_ctx_,this.layout_.getPlotArea(),this,this)}var c={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",c);this.plotter_.render();this.cascadeEvents_("didDrawChart",c);this.canvas_.getContext("2d").clearRect(0,0,this.canvas_.width,this.canvas_.height);if(this.rangeSelector_){this.rangeSelector_.renderInteractiveLayer()}if(this.attr_("drawCallback")!==null){this.attr_("drawCallback")(this,d)}};Dygraph.prototype.computeYAxes_=function(){var v,A,r,B,t,C,i;if(this.axes_!==undefined&&this.user_attrs_.hasOwnProperty("valueRange")===false){A=[];for(t=0;t<this.axes_.length;t++){A.push(this.axes_[t].valueWindow)}}this.axes_=[{yAxisId:0,g:this}];this.seriesToAxisMap_={};var u=this.attr_("labels");var w={};for(v=1;v<u.length;v++){w[u[v]]=(v-1)}var y=["includeZero","valueRange","labelsKMB","labelsKMG2","pixelsPerYLabel","yAxisLabelWidth","axisLabelFontSize","axisTickSize","logscale"];for(v=0;v<y.length;v++){var z=y[v];i=this.attr_(z);if(i){this.axes_[0][z]=i}}for(r in w){if(!w.hasOwnProperty(r)){continue}B=this.attr_("axis",r);if(B===null){this.seriesToAxisMap_[r]=0;continue}if(typeof(B)=="object"){C={};Dygraph.update(C,this.axes_[0]);Dygraph.update(C,{valueRange:null});var k=this.axes_.length;C.yAxisId=k;C.g=this;Dygraph.update(C,B);this.axes_.push(C);this.seriesToAxisMap_[r]=k}}for(r in w){if(!w.hasOwnProperty(r)){continue}B=this.attr_("axis",r);if(typeof(B)=="string"){if(!this.seriesToAxisMap_.hasOwnProperty(B)){this.error("Series "+r+" wants to share a y-axis with series "+B+", which does not define its own axis.");return null}var q=this.seriesToAxisMap_[B];this.seriesToAxisMap_[r]=q}}if(A!==undefined){for(t=0;t<A.length;t++){this.axes_[t].valueWindow=A[t]}}for(B=0;B<this.axes_.length;B++){if(B===0){C=this.optionsViewForAxis_("y"+(B?"2":""));i=C("valueRange");if(i){this.axes_[B].valueRange=i}}else{var s=this.user_attrs_.axes;if(s&&s.y2){i=s.y2.valueRange;if(i){this.axes_[B].valueRange=i}}}}};Dygraph.prototype.numAxes=function(){var f=0;for(var d in this.seriesToAxisMap_){if(!this.seriesToAxisMap_.hasOwnProperty(d)){continue}var e=this.seriesToAxisMap_[d];if(e>f){f=e}}return 1+f};Dygraph.prototype.axisPropertiesForSeries=function(b){return this.axes_[this.seriesToAxisMap_[b]]};Dygraph.prototype.computeYAxisRanges_=function(W){var Q=[],P;for(P in this.seriesToAxisMap_){if(!this.seriesToAxisMap_.hasOwnProperty(P)){continue}var K=this.seriesToAxisMap_[P];while(Q.length<=K){Q.push([])}Q[K].push(P)}for(var D=0;D<this.axes_.length;D++){var V=this.axes_[D];if(!Q[D]){V.extremeRange=[0,1]}else{P=Q[D];var j=Infinity;var k=-Infinity;var L,N;for(var F=0;F<P.length;F++){if(!W.hasOwnProperty(P[F])){continue}L=W[P[F]][0];if(L!==null){j=Math.min(L,j)}N=W[P[F]][1];if(N!==null){k=Math.max(N,k)}}if(V.includeZero&&j>0){j=0}if(j==Infinity){j=0}if(k==-Infinity){k=1}var E=k-j;if(E===0){E=k}var T,J;if(V.logscale){T=k+0.1*E;J=j}else{T=k+0.1*E;J=j-0.1*E;if(!this.attr_("avoidMinZero")){if(J<0&&j>=0){J=0}if(T>0&&k<=0){T=0}}if(this.attr_("includeZero")){if(k<0){T=0}if(j>0){J=0}}}V.extremeRange=[J,T]}if(V.valueWindow){V.computedValueRange=[V.valueWindow[0],V.valueWindow[1]]}else{if(V.valueRange){V.computedValueRange=[V.valueRange[0],V.valueRange[1]]}else{V.computedValueRange=V.extremeRange}}var M=this.optionsViewForAxis_("y"+(D?"2":""));var i=M("ticker");if(D===0||V.independentTicks){V.ticks=i(V.computedValueRange[0],V.computedValueRange[1],this.height_,M,this)}else{var O=this.axes_[0];var S=O.ticks;var R=O.computedValueRange[1]-O.computedValueRange[0];var I=V.computedValueRange[1]-V.computedValueRange[0];var U=[];for(var G=0;G<S.length;G++){var H=(S[G].v-O.computedValueRange[0])/R;var C=V.computedValueRange[0]+H*I;U.push(C)}V.ticks=i(V.computedValueRange[0],V.computedValueRange[1],this.height_,M,this,U)}}};Dygraph.prototype.extractSeries_=function(j,l,k){var m=[];for(var n=0;n<j.length;n++){var h=j[n][0];var i=j[n][l];if(k){if(i<=0){i=null}}m.push([h,i])}return m};Dygraph.prototype.rollingAverage=function(R,X){if(R.length<2){return R}X=Math.min(X,R.length);var Z=[];var J=this.attr_("sigma");var p,P,j,n,Q,Y,H,i;if(this.fractions_){var S=0;var T=0;var W=100;for(j=0;j<R.length;j++){S+=R[j][1][0];T+=R[j][1][1];if(j-X>=0){S-=R[j-X][1][0];T-=R[j-X][1][1]}var N=R[j][0];var y=T?S/T:0;if(this.attr_("errorBars")){if(this.attr_("wilsonInterval")){if(T){var L=y<0?0:y,G=T;var O=J*Math.sqrt(L*(1-L)/G+J*J/(4*G*G));var aa=1+J*J/T;p=(L+J*J/(2*T)-O)/aa;P=(L+J*J/(2*T)+O)/aa;Z[j]=[N,[L*W,(L-p)*W,(P-L)*W]]}else{Z[j]=[N,[0,0,0]]}}else{i=T?J*Math.sqrt(y*(1-y)/T):1;Z[j]=[N,[W*y,W*i,W*i]]}}else{Z[j]=[N,W*y]}}}else{if(this.attr_("customBars")){p=0;var K=0;P=0;var U=0;for(j=0;j<R.length;j++){var I=R[j][1];Q=I[1];Z[j]=[R[j][0],[Q,Q-I[0],I[2]-Q]];if(Q!==null&&!isNaN(Q)){p+=I[0];K+=Q;P+=I[2];U+=1}if(j-X>=0){var M=R[j-X];if(M[1][1]!==null&&!isNaN(M[1][1])){p-=M[1][0];K-=M[1][1];P-=M[1][2];U-=1}}if(U){Z[j]=[R[j][0],[1*K/U,1*(K-p)/U,1*(P-K)/U]]}else{Z[j]=[R[j][0],[null,null,null]]}}}else{if(!this.attr_("errorBars")){if(X==1){return R}for(j=0;j<R.length;j++){Y=0;H=0;for(n=Math.max(0,j-X+1);n<j+1;n++){Q=R[n][1];if(Q===null||isNaN(Q)){continue}H++;Y+=R[n][1]}if(H){Z[j]=[R[j][0],Y/H]}else{Z[j]=[R[j][0],null]}}}else{for(j=0;j<R.length;j++){Y=0;var V=0;H=0;for(n=Math.max(0,j-X+1);n<j+1;n++){Q=R[n][1][0];if(Q===null||isNaN(Q)){continue}H++;Y+=R[n][1][0];V+=Math.pow(R[n][1][1],2)}if(H){i=Math.sqrt(V)/H;Z[j]=[R[j][0],[Y/H,J*i,J*i]]}else{Z[j]=[R[j][0],[null,null,null]]}}}}}return Z};Dygraph.prototype.detectTypeFromString_=function(d){var e=false;var f=d.indexOf("-");if((f>0&&(d[f-1]!="e"&&d[f-1]!="E"))||d.indexOf("/")>=0||isNaN(parseFloat(d))){e=true}else{if(d.length==8&&d>"19700101"&&d<"20371231"){e=true}}if(e){this.attrs_.xValueParser=Dygraph.dateParser;this.attrs_.axes.x.valueFormatter=Dygraph.dateString_;this.attrs_.axes.x.ticker=Dygraph.dateTicker;this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter}else{this.attrs_.xValueParser=function(a){return parseFloat(a)};this.attrs_.axes.x.valueFormatter=function(a){return a};this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks;this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}};Dygraph.prototype.parseFloat_=function(g,j,f){var h=parseFloat(g);if(!isNaN(h)){return h}if(/^ *$/.test(g)){return null}if(/^ *nan *$/i.test(g)){return NaN}var i="Unable to parse '"+g+"' as a number";if(f!==null&&j!==null){i+=" on line "+(1+j)+" ('"+f+"') of CSV."}this.error(i);return null};Dygraph.prototype.parseCSV_=function(j){var u=[];var K=j.split("\n");var E,C;var w=this.attr_("delimiter");if(K[0].indexOf(w)==-1&&K[0].indexOf("\t")>=0){w="\t"}var J=0;if(!("labels" in this.user_attrs_)){J=1;this.attrs_.labels=K[0].split(w)}var y=0;var A;var v=false;var I=this.attr_("labels").length;var F=false;for(var B=J;B<K.length;B++){var G=K[B];y=B;if(G.length===0){continue}if(G[0]=="#"){continue}var H=G.split(w);if(H.length<2){continue}var D=[];if(!v){this.detectTypeFromString_(H[0]);A=this.attr_("xValueParser");v=true}D[0]=A(H[0],this);if(this.fractions_){for(C=1;C<H.length;C++){E=H[C].split("/");if(E.length!=2){this.error('Expected fractional "num/den" values in CSV data but found a value \''+H[C]+"' on line "+(1+B)+" ('"+G+"') which is not of this form.");D[C]=[0,0]}else{D[C]=[this.parseFloat_(E[0],B,G),this.parseFloat_(E[1],B,G)]}}}else{if(this.attr_("errorBars")){if(H.length%2!=1){this.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+B)+" has an odd number of values ("+(H.length-1)+"): '"+G+"'")}for(C=1;C<H.length;C+=2){D[(C+1)/2]=[this.parseFloat_(H[C],B,G),this.parseFloat_(H[C+1],B,G)]}}else{if(this.attr_("customBars")){for(C=1;C<H.length;C++){var i=H[C];if(/^ *$/.test(i)){D[C]=[null,null,null]}else{E=i.split(";");if(E.length==3){D[C]=[this.parseFloat_(E[0],B,G),this.parseFloat_(E[1],B,G),this.parseFloat_(E[2],B,G)]}else{this.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+i+'" on line '+(1+B))}}}}else{for(C=1;C<H.length;C++){D[C]=this.parseFloat_(H[C],B,G)}}}}if(u.length>0&&D[0]<u[u.length-1][0]){F=true}if(D.length!=I){this.error("Number of columns in line "+B+" ("+D.length+") does not agree with number of labels ("+I+") "+G)}if(B===0&&this.attr_("labels")){var z=true;for(C=0;z&&C<D.length;C++){if(D[C]){z=false}}if(z){this.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+G+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}u.push(D)}if(F){this.warn("CSV is out of order; order it correctly to speed loading.");u.sort(function(a,b){return a[0]-b[0]})}return u};Dygraph.prototype.parseArray_=function(h){if(h.length===0){this.error("Can't plot empty data set");return null}if(h[0].length===0){this.error("Data set cannot contain an empty row");return null}var f;if(this.attr_("labels")===null){this.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter");this.attrs_.labels=["X"];for(f=1;f<h[0].length;f++){this.attrs_.labels.push("Y"+f)}}else{var e=this.attr_("labels");if(e.length!=h[0].length){this.error("Mismatch between number of labels ("+e+") and number of columns in array ("+h[0].length+")");return null}}if(Dygraph.isDateLike(h[0][0])){this.attrs_.axes.x.valueFormatter=Dygraph.dateString_;this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter;this.attrs_.axes.x.ticker=Dygraph.dateTicker;var g=Dygraph.clone(h);for(f=0;f<h.length;f++){if(g[f].length===0){this.error("Row "+(1+f)+" of data is empty");return null}if(g[f][0]===null||typeof(g[f][0].getTime)!="function"||isNaN(g[f][0].getTime())){this.error("x value in row "+(1+f)+" is not a Date");return null}g[f][0]=g[f][0].getTime()}return g}else{this.attrs_.axes.x.valueFormatter=function(a){return a};this.attrs_.axes.x.axisLabelFormatter=Dygraph.numberAxisLabelFormatter;this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks;return h}};Dygraph.prototype.parseDataTable_=function(i){var L=function(b){var a=String.fromCharCode(65+b%26);b=Math.floor(b/26);while(b>0){a=String.fromCharCode(65+(b-1)%26)+a.toLowerCase();b=Math.floor((b-1)/26)}return a};var H=i.getNumberOfColumns();var I=i.getNumberOfRows();var J=i.getColumnType(0);if(J=="date"||J=="datetime"){this.attrs_.xValueParser=Dygraph.dateParser;this.attrs_.axes.x.valueFormatter=Dygraph.dateString_;this.attrs_.axes.x.ticker=Dygraph.dateTicker;this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter}else{if(J=="number"){this.attrs_.xValueParser=function(a){return parseFloat(a)};this.attrs_.axes.x.valueFormatter=function(a){return a};this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks;this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}else{this.error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+J+"')");return null}}var F=[];var y={};var z=false;var B,D;for(B=1;B<H;B++){var N=i.getColumnType(B);if(N=="number"){F.push(B)}else{if(N=="string"&&this.attr_("displayAnnotations")){var A=F[F.length-1];if(!y.hasOwnProperty(A)){y[A]=[B]}else{y[A].push(B)}z=true}else{this.error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true")}}}var k=[i.getColumnLabel(0)];for(B=0;B<F.length;B++){k.push(i.getColumnLabel(F[B]));if(this.attr_("errorBars")){B+=1}}this.attrs_.labels=k;H=k.length;var j=[];var G=false;var O=[];for(B=0;B<I;B++){var K=[];if(typeof(i.getValue(B,0))==="undefined"||i.getValue(B,0)===null){this.warn("Ignoring row "+B+" of DataTable because of undefined or null first column.");continue}if(J=="date"||J=="datetime"){K.push(i.getValue(B,0).getTime())}else{K.push(i.getValue(B,0))}if(!this.attr_("errorBars")){for(D=0;D<F.length;D++){var M=F[D];K.push(i.getValue(B,M));if(z&&y.hasOwnProperty(M)&&i.getValue(B,y[M][0])!==null){var C={};C.series=i.getColumnLabel(M);C.xval=K[0];C.shortText=L(O.length);C.text="";for(var E=0;E<y[M].length;E++){if(E){C.text+="\n"}C.text+=i.getValue(B,y[M][E])}O.push(C)}}for(D=0;D<K.length;D++){if(!isFinite(K[D])){K[D]=null}}}else{for(D=0;D<H-1;D++){K.push([i.getValue(B,1+2*D),i.getValue(B,2+2*D)])}}if(j.length>0&&K[0]<j[j.length-1][0]){G=true}j.push(K)}if(G){this.warn("DataTable is out of order; order it correctly to speed loading.");j.sort(function(a,b){return a[0]-b[0]})}this.rawData_=j;if(O.length>0){this.setAnnotations(O,true)}};Dygraph.prototype.start_=function(){var f=this.file_;if(typeof f=="function"){f=f()}if(Dygraph.isArrayLike(f)){this.rawData_=this.parseArray_(f);this.predraw_()}else{if(typeof f=="object"&&typeof f.getColumnRange=="function"){this.parseDataTable_(f);this.predraw_()}else{if(typeof f=="string"){if(f.indexOf("\n")>=0){this.loadedEvent_(f)}else{var d=new XMLHttpRequest();var e=this;d.onreadystatechange=function(){if(d.readyState==4){if(d.status===200||d.status===0){e.loadedEvent_(d.responseText)}}};d.open("GET",f,true);d.send(null)}}else{this.error("Unknown data format: "+(typeof f))}}}};Dygraph.prototype.updateOptions=function(h,f){if(typeof(f)=="undefined"){f=false}var i=h.file;var j=Dygraph.mapLegacyOptions_(h);if("rollPeriod" in j){this.rollPeriod_=j.rollPeriod}if("dateWindow" in j){this.dateWindow_=j.dateWindow;if(!("isZoomedIgnoreProgrammaticZoom" in j)){this.zoomed_x_=(j.dateWindow!==null)}}if("valueRange" in j&&!("isZoomedIgnoreProgrammaticZoom" in j)){this.zoomed_y_=(j.valueRange!==null)}var g=Dygraph.isPixelChangingOptionList(this.attr_("labels"),j);Dygraph.updateDeep(this.user_attrs_,j);if(i){this.file_=i;if(!f){this.start_()}}else{if(!f){if(g){this.predraw_()}else{this.renderGraph_(false)}}}};Dygraph.mapLegacyOptions_=function(j){var g={};for(var f in j){if(f=="file"){continue}if(j.hasOwnProperty(f)){g[f]=j[f]}}var h=function(b,c,a){if(!g.axes){g.axes={}}if(!g.axes[b]){g.axes[b]={}}g.axes[b][c]=a};var i=function(c,b,a){if(typeof(j[c])!="undefined"){h(b,a,j[c]);delete g[c]}};i("xValueFormatter","x","valueFormatter");i("pixelsPerXLabel","x","pixelsPerLabel");i("xAxisLabelFormatter","x","axisLabelFormatter");i("xTicker","x","ticker");i("yValueFormatter","y","valueFormatter");i("pixelsPerYLabel","y","pixelsPerLabel");i("yAxisLabelFormatter","y","axisLabelFormatter");i("yTicker","y","ticker");return g};Dygraph.prototype.resize=function(g,e){if(this.resize_lock){return}this.resize_lock=true;if((g===null)!=(e===null)){this.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero.");g=e=null}var f=this.width_;var h=this.height_;if(g){this.maindiv_.style.width=g+"px";this.maindiv_.style.height=e+"px";this.width_=g;this.height_=e}else{this.width_=this.maindiv_.clientWidth;this.height_=this.maindiv_.clientHeight}if(f!=this.width_||h!=this.height_){this.maindiv_.innerHTML="";this.roller_=null;this.attrs_.labelsDiv=null;this.createInterface_();if(this.annotations_.length){this.layout_.setAnnotations(this.annotations_)}this.predraw_()}this.resize_lock=false};Dygraph.prototype.adjustRoll=function(b){this.rollPeriod_=b;this.predraw_()};Dygraph.prototype.visibility=function(){if(!this.attr_("visibility")){this.attrs_.visibility=[]}while(this.attr_("visibility").length<this.numColumns()-1){this.attrs_.visibility.push(true)}return this.attr_("visibility")};Dygraph.prototype.setVisibility=function(d,f){var e=this.visibility();if(d<0||d>=e.length){this.warn("invalid series number in setVisibility: "+d)}else{e[d]=f;this.predraw_()}};Dygraph.prototype.size=function(){return{width:this.width_,height:this.height_}};Dygraph.prototype.setAnnotations=function(c,d){Dygraph.addAnnotationRule();this.annotations_=c;this.layout_.setAnnotations(this.annotations_);if(!d){this.predraw_()}};Dygraph.prototype.annotations=function(){return this.annotations_};Dygraph.prototype.getLabels=function(){return this.attr_("labels").slice()};Dygraph.prototype.indexFromSetName=function(b){return this.setIndexByName_[b]};Dygraph.prototype.datasetIndexFromSetName_=function(b){return this.datasetIndex_[this.indexFromSetName(b)]};Dygraph.addAnnotationRule=function(){if(Dygraph.addedAnnotationCSS){return}var i="border: 1px solid black; background-color: white; text-align: center;";var j=document.createElement("style");j.type="text/css";document.getElementsByTagName("head")[0].appendChild(j);for(var g=0;g<document.styleSheets.length;g++){if(document.styleSheets[g].disabled){continue}var k=document.styleSheets[g];try{if(k.insertRule){var h=k.cssRules?k.cssRules.length:0;k.insertRule(".dygraphDefaultAnnotation { "+i+" }",h)}else{if(k.addRule){k.addRule(".dygraphDefaultAnnotation",i)}}Dygraph.addedAnnotationCSS=true;return}catch(l){}}this.warn("Unable to add default annotation CSS rule; display may be off.")};var DateGraph=Dygraph;"use strict";Dygraph.LOG_SCALE=10;Dygraph.LN_TEN=Math.log(Dygraph.LOG_SCALE);Dygraph.log10=function(b){return Math.log(b)/Dygraph.LN_TEN};Dygraph.DEBUG=1;Dygraph.INFO=2;Dygraph.WARNING=3;Dygraph.ERROR=3;Dygraph.LOG_STACK_TRACES=false;Dygraph.DOTTED_LINE=[2,2];Dygraph.DASHED_LINE=[7,3];Dygraph.DOT_DASH_LINE=[7,2,2,2];Dygraph.log=function(e,k){var h;if(typeof(printStackTrace)!="undefined"){try{h=printStackTrace({guess:false});while(h[0].indexOf("stacktrace")!=-1){h.splice(0,1)}h.splice(0,2);for(var l=0;l<h.length;l++){h[l]=h[l].replace(/\([^)]*\/(.*)\)/,"@$1").replace(/\@.*\/([^\/]*)/,"@$1").replace("[object Object].","")}var i=h.splice(0,1)[0];k+=" ("+i.replace(/^.*@ ?/,"")+")"}catch(j){}}if(typeof(console)!="undefined"){switch(e){case Dygraph.DEBUG:console.debug("dygraphs: "+k);break;case Dygraph.INFO:console.info("dygraphs: "+k);break;case Dygraph.WARNING:console.warn("dygraphs: "+k);break;case Dygraph.ERROR:console.error("dygraphs: "+k);break}}if(Dygraph.LOG_STACK_TRACES){console.log(h.join("\n"))}};Dygraph.info=function(b){Dygraph.log(Dygraph.INFO,b)};Dygraph.prototype.info=Dygraph.info;Dygraph.warn=function(b){Dygraph.log(Dygraph.WARNING,b)};Dygraph.prototype.warn=Dygraph.warn;Dygraph.error=function(b){Dygraph.log(Dygraph.ERROR,b)};Dygraph.prototype.error=Dygraph.error;Dygraph.getContext=function(b){return b.getContext("2d")};Dygraph.addEvent=function addEvent(f,d,e){if(f.addEventListener){f.addEventListener(d,e,false)}else{f[d+e]=function(){e(window.event)};f.attachEvent("on"+d,f[d+e])}};Dygraph.prototype.addEvent=function addEvent(f,d,e){Dygraph.addEvent(f,d,e);this.registeredEvents_.push({elem:f,type:d,fn:e})};Dygraph.removeEvent=function addEvent(f,d,e){if(f.removeEventListener){f.removeEventListener(d,e,false)}else{f.detachEvent("on"+d,f[d+e]);f[d+e]=null}};Dygraph.cancelEvent=function(b){b=b?b:window.event;if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}b.cancelBubble=true;b.cancel=true;b.returnValue=false;return false};Dygraph.hsvToRGB=function(p,q,n){var t;var s;var i;if(q===0){t=n;s=n;i=n}else{var r=Math.floor(p*6);var o=(p*6)-r;var u=n*(1-q);var v=n*(1-(q*o));var f=n*(1-(q*(1-o)));switch(r){case 1:t=v;s=n;i=u;break;case 2:t=u;s=n;i=f;break;case 3:t=u;s=v;i=n;break;case 4:t=f;s=u;i=n;break;case 5:t=n;s=u;i=v;break;case 6:case 0:t=n;s=f;i=u;break}}t=Math.floor(255*t+0.5);s=Math.floor(255*s+0.5);i=Math.floor(255*i+0.5);return"rgb("+t+","+s+","+i+")"};Dygraph.findPosX=function(d){var f=0;if(d.offsetParent){var e=d;while(1){f+=e.offsetLeft;if(!e.offsetParent){break}e=e.offsetParent}}else{if(d.x){f+=d.x}}while(d&&d!=document.body){f-=d.scrollLeft;d=d.parentNode}return f};Dygraph.findPosY=function(f){var d=0;if(f.offsetParent){var e=f;while(1){d+=e.offsetTop;if(!e.offsetParent){break}e=e.offsetParent}}else{if(f.y){d+=f.y}}while(f&&f!=document.body){d-=f.scrollTop;f=f.parentNode}return d};Dygraph.pageX=function(f){if(f.pageX){return(!f.pageX||f.pageX<0)?0:f.pageX}else{var e=document;var b=document.body;return f.clientX+(e.scrollLeft||b.scrollLeft)-(e.clientLeft||0)}};Dygraph.pageY=function(f){if(f.pageY){return(!f.pageY||f.pageY<0)?0:f.pageY}else{var e=document;var b=document.body;return f.clientY+(e.scrollTop||b.scrollTop)-(e.clientTop||0)}};Dygraph.isOK=function(b){return b&&!isNaN(b)};Dygraph.isValidPoint=function(c,d){if(!c){return false}if(c.yval===null){return false}if(c.x===null||c.x===undefined){return false}if(c.y===null||c.y===undefined){return false}if(isNaN(c.x)||(!d&&isNaN(c.y))){return false}return true};Dygraph.floatFormat=function(e,d){var f=Math.min(Math.max(1,d||2),21);return(Math.abs(e)<0.001&&e!==0)?e.toExponential(f-1):e.toPrecision(f)};Dygraph.zeropad=function(b){if(b<10){return"0"+b}else{return""+b}};Dygraph.hmsString_=function(e){var f=Dygraph.zeropad;var d=new Date(e);if(d.getSeconds()){return f(d.getHours())+":"+f(d.getMinutes())+":"+f(d.getSeconds())}else{return f(d.getHours())+":"+f(d.getMinutes())}};Dygraph.round_=function(f,d){var e=Math.pow(10,d);return Math.round(f*e)/e};Dygraph.binarySearch=function(r,o,j,n,q){if(n===null||n===undefined||q===null||q===undefined){n=0;q=o.length-1}if(n>q){return -1}if(j===null||j===undefined){j=0}var k=function(a){return a>=0&&a<o.length};var l=parseInt((n+q)/2,10);var p=o[l];if(p==r){return l}var m;if(p>r){if(j>0){m=l-1;if(k(m)&&o[m]<r){return l}}return Dygraph.binarySearch(r,o,j,n,l-1)}if(p<r){if(j<0){m=l+1;if(k(m)&&o[m]>r){return l}}return Dygraph.binarySearch(r,o,j,l+1,q)}};Dygraph.dateParser=function(e){var d;var f;if(e.search("-")==-1||e.search("T")!=-1||e.search("Z")!=-1){f=Dygraph.dateStrToMillis(e);if(f&&!isNaN(f)){return f}}if(e.search("-")!=-1){d=e.replace("-","/","g");while(d.search("-")!=-1){d=d.replace("-","/")}f=Dygraph.dateStrToMillis(d)}else{if(e.length==8){d=e.substr(0,4)+"/"+e.substr(4,2)+"/"+e.substr(6,2);f=Dygraph.dateStrToMillis(d)}else{f=Dygraph.dateStrToMillis(e)}}if(!f||isNaN(f)){Dygraph.error("Couldn't parse "+e+" as a date")}return f};Dygraph.dateStrToMillis=function(b){return new Date(b).getTime()};Dygraph.update=function(d,f){if(typeof(f)!="undefined"&&f!==null){for(var e in f){if(f.hasOwnProperty(e)){d[e]=f[e]}}}return d};Dygraph.updateDeep=function(e,g){function h(a){return(typeof Node==="object"?a instanceof Node:typeof a==="object"&&typeof a.nodeType==="number"&&typeof a.nodeName==="string")}if(typeof(g)!="undefined"&&g!==null){for(var f in g){if(g.hasOwnProperty(f)){if(g[f]===null){e[f]=null}else{if(Dygraph.isArrayLike(g[f])){e[f]=g[f].slice()}else{if(h(g[f])){e[f]=g[f]}else{if(typeof(g[f])=="object"){if(typeof(e[f])!="object"||e[f]===null){e[f]={}}Dygraph.updateDeep(e[f],g[f])}else{e[f]=g[f]}}}}}}}return e};Dygraph.isArrayLike=function(c){var d=typeof(c);if((d!="object"&&!(d=="function"&&typeof(c.item)=="function"))||c===null||typeof(c.length)!="number"||c.nodeType===3){return false}return true};Dygraph.isDateLike=function(b){if(typeof(b)!="object"||b===null||typeof(b.getTime)!="function"){return false}return true};Dygraph.clone=function(f){var d=[];for(var e=0;e<f.length;e++){if(Dygraph.isArrayLike(f[e])){d.push(Dygraph.clone(f[e]))}else{d.push(f[e])}}return d};Dygraph.createCanvas=function(){var d=document.createElement("canvas");var c=(/MSIE/.test(navigator.userAgent)&&!window.opera);if(c&&(typeof(G_vmlCanvasManager)!="undefined")){d=G_vmlCanvasManager.initElement(d)}return d};Dygraph.isAndroid=function(){return(/Android/).test(navigator.userAgent)};Dygraph.Iterator=function(g,h,e,f){h=h||0;e=e||g.length;this.hasNext=true;this.peek=null;this.start_=h;this.array_=g;this.predicate_=f;this.end_=Math.min(g.length,h+e);this.nextIdx_=h-1;this.next()};Dygraph.Iterator.prototype.next=function(){if(!this.hasNext){return null}var f=this.peek;var d=this.nextIdx_+1;var e=false;while(d<this.end_){if(!this.predicate_||this.predicate_(this.array_,d)){this.peek=this.array_[d];e=true;break}d++}this.nextIdx_=d;if(!e){this.hasNext=false;this.peek=null}return f};Dygraph.createIterator=function(g,h,e,f){return new Dygraph.Iterator(g,h,e,f)};Dygraph.repeatAndCleanup=function(h,j,k,n){var l=0;var m=new Date().getTime();h(l);if(j==1){n();return}(function i(){if(l>=j){return}var a=m+(1+l)*k;setTimeout(function(){l++;h(l);if(l>=j-1){n()}else{i()}},a-new Date().getTime())})()};Dygraph.isPixelChangingOptionList=function(k,n){var o={annotationClickHandler:true,annotationDblClickHandler:true,annotationMouseOutHandler:true,annotationMouseOverHandler:true,axisLabelColor:true,axisLineColor:true,axisLineWidth:true,clickCallback:true,digitsAfterDecimal:true,drawCallback:true,drawHighlightPointCallback:true,drawPoints:true,drawPointCallback:true,drawXGrid:true,drawYGrid:true,fillAlpha:true,gridLineColor:true,gridLineWidth:true,hideOverlayOnMouseOut:true,highlightCallback:true,highlightCircleSize:true,interactionModel:true,isZoomedIgnoreProgrammaticZoom:true,labelsDiv:true,labelsDivStyles:true,labelsDivWidth:true,labelsKMB:true,labelsKMG2:true,labelsSeparateLines:true,labelsShowZeroValues:true,legend:true,maxNumberWidth:true,panEdgeFraction:true,pixelsPerYLabel:true,pointClickCallback:true,pointSize:true,rangeSelectorPlotFillColor:true,rangeSelectorPlotStrokeColor:true,showLabelsOnHighlight:true,showRoller:true,sigFigs:true,strokeWidth:true,underlayCallback:true,unhighlightCallback:true,xAxisLabelFormatter:true,xTicker:true,xValueFormatter:true,yAxisLabelFormatter:true,yValueFormatter:true,zoomCallback:true};var j=false;var i={};if(k){for(var m=1;m<k.length;m++){i[k[m]]=true}}for(var l in n){if(j){break}if(n.hasOwnProperty(l)){if(i[l]){for(var p in n[l]){if(j){break}if(n[l].hasOwnProperty(p)&&!o[p]){j=true}}}else{if(!o[l]){j=true}}}}return j};Dygraph.compareArrays=function(f,d){if(!Dygraph.isArrayLike(f)||!Dygraph.isArrayLike(d)){return false}if(f.length!==d.length){return false}for(var e=0;e<f.length;e++){if(f[e]!==d[e]){return false}}return true};Dygraph.regularShape_=function(q,E,w,B,C,G,r){G=G?G:0;r=r?r:Math.PI*2/E;q.beginPath();var z=true;var A=G;var D=A;var y=function(){var b=B+(Math.sin(D)*w);var a=C+(-Math.cos(D)*w);return[b,a]};var F=y();var t=F[0];var v=F[1];q.moveTo(t,v);for(var s=0;s<E;s++){D=(s==E-1)?A:(D+r);var u=y();q.lineTo(u[0],u[1])}q.fill();q.stroke()};Dygraph.shapeFunction_=function(d,e,f){return function(b,c,l,m,a,g,n){l.strokeStyle=g;l.fillStyle="white";Dygraph.regularShape_(l,d,n,m,a,e,f)}};Dygraph.DrawPolygon_=function(m,p,o,i,k,n,j,l){new Dygraph.RegularShape_(m,p,l).draw(o,i,k,j)};Dygraph.Circles={DEFAULT:function(j,k,g,l,m,n,i){g.beginPath();g.fillStyle=n;g.arc(l,m,i,0,2*Math.PI,false);g.fill()},TRIANGLE:Dygraph.shapeFunction_(3),SQUARE:Dygraph.shapeFunction_(4,Math.PI/4),DIAMOND:Dygraph.shapeFunction_(4),PENTAGON:Dygraph.shapeFunction_(5),HEXAGON:Dygraph.shapeFunction_(6),CIRCLE:function(k,l,n,g,j,m,i){n.beginPath();n.strokeStyle=m;n.fillStyle="white";n.arc(g,j,i,0,2*Math.PI,false);n.fill();n.stroke()},STAR:Dygraph.shapeFunction_(5,0,4*Math.PI/5),PLUS:function(k,l,n,g,j,m,i){n.strokeStyle=m;n.beginPath();n.moveTo(g+i,j);n.lineTo(g-i,j);n.closePath();n.stroke();n.beginPath();n.moveTo(g,j+i);n.lineTo(g,j-i);n.closePath();n.stroke()},EX:function(k,l,n,g,j,m,i){n.strokeStyle=m;n.beginPath();n.moveTo(g+i,j+i);n.lineTo(g-i,j-i);n.closePath();n.stroke();n.beginPath();n.moveTo(g+i,j-i);n.lineTo(g-i,j+i);n.closePath();n.stroke()}};"use strict";Dygraph.GVizChart=function(b){this.container=b};Dygraph.GVizChart.prototype.draw=function(c,d){this.container.innerHTML="";if(typeof(this.date_graph)!="undefined"){this.date_graph.destroy()}this.date_graph=new Dygraph(this.container,c,d)};Dygraph.GVizChart.prototype.setSelection=function(c){var d=false;if(c.length){d=c[0].row}this.date_graph.setSelection(d)};Dygraph.GVizChart.prototype.getSelection=function(){var e=[];var g=this.date_graph.getSelection();if(g<0){return e}var f=this.date_graph.layout_.datasets;for(var h=0;h<f.length;++h){e.push({row:g,column:h+1})}return e};"use strict";Dygraph.Interaction={};Dygraph.Interaction.startPan=function(E,z,O){var B,P;O.isPanning=true;var I=z.xAxisRange();O.dateRange=I[1]-I[0];O.initialLeftmostDate=I[0];O.xUnitsPerPixel=O.dateRange/(z.plotter_.area.w-1);if(z.attr_("panEdgeFraction")){var g=z.width_*z.attr_("panEdgeFraction");var N=z.xAxisExtremes();var J=z.toDomXCoord(N[0])-g;var H=z.toDomXCoord(N[1])+g;var y=z.toDataXCoord(J);var i=z.toDataXCoord(H);O.boundedDates=[y,i];var L=[];var Q=z.height_*z.attr_("panEdgeFraction");for(B=0;B<z.axes_.length;B++){P=z.axes_[B];var D=P.extremeRange;var C=z.toDomYCoord(D[0],B)+Q;var A=z.toDomYCoord(D[1],B)-Q;var F=z.toDataYCoord(C);var M=z.toDataYCoord(A);L[B]=[F,M]}O.boundedValues=L}O.is2DPan=false;O.axes=[];for(B=0;B<z.axes_.length;B++){P=z.axes_[B];var K={};var G=z.yAxisRange(B);if(P.logscale){K.initialTopValue=Dygraph.log10(G[1]);K.dragValueRange=Dygraph.log10(G[1])-Dygraph.log10(G[0])}else{K.initialTopValue=G[1];K.dragValueRange=G[1]-G[0]}K.unitsPerPixel=K.dragValueRange/(z.plotter_.area.h-1);O.axes.push(K);if(P.valueWindow||P.valueRange){O.is2DPan=true}}};Dygraph.Interaction.movePan=function(z,r,y){y.dragEndX=r.dragGetX_(z,y);y.dragEndY=r.dragGetY_(z,y);var t=y.initialLeftmostDate-(y.dragEndX-y.dragStartX)*y.xUnitsPerPixel;if(y.boundedDates){t=Math.max(t,y.boundedDates[0])}var A=t+y.dateRange;if(y.boundedDates){if(A>y.boundedDates[1]){t=t-(A-y.boundedDates[1]);A=t+y.dateRange}}r.dateWindow_=[t,A];if(y.is2DPan){for(var s=0;s<r.axes_.length;s++){var v=r.axes_[s];var i=y.axes[s];var w=y.dragEndY-y.dragStartY;var g=w*i.unitsPerPixel;var u=y.boundedValues?y.boundedValues[s]:null;var q=i.initialTopValue+g;if(u){q=Math.min(q,u[1])}var p=q-i.dragValueRange;if(u){if(p<u[0]){q=q-(p-u[0]);p=q-i.dragValueRange}}if(v.logscale){v.valueWindow=[Math.pow(Dygraph.LOG_SCALE,p),Math.pow(Dygraph.LOG_SCALE,q)]}else{v.valueWindow=[p,q]}}}r.drawGraph_(false)};Dygraph.Interaction.endPan=function(j,f,g){g.dragEndX=f.dragGetX_(j,g);g.dragEndY=f.dragGetY_(j,g);var h=Math.abs(g.dragEndX-g.dragStartX);var i=Math.abs(g.dragEndY-g.dragStartY);if(h<2&&i<2&&f.lastx_!==undefined&&f.lastx_!=-1){Dygraph.Interaction.treatMouseOpAsClick(f,j,g)}g.isPanning=false;g.is2DPan=false;g.initialLeftmostDate=null;g.dateRange=null;g.valueRange=null;g.boundedDates=null;g.boundedValues=null;g.axes=null};Dygraph.Interaction.startZoom=function(f,d,e){e.isZooming=true;e.zoomMoved=false};Dygraph.Interaction.moveZoom=function(j,f,g){g.zoomMoved=true;g.dragEndX=f.dragGetX_(j,g);g.dragEndY=f.dragGetY_(j,g);var h=Math.abs(g.dragStartX-g.dragEndX);var i=Math.abs(g.dragStartY-g.dragEndY);g.dragDirection=(h<i/2)?Dygraph.VERTICAL:Dygraph.HORIZONTAL;f.drawZoomRect_(g.dragDirection,g.dragStartX,g.dragEndX,g.dragStartY,g.dragEndY,g.prevDragDirection,g.prevEndX,g.prevEndY);g.prevEndX=g.dragEndX;g.prevEndY=g.dragEndY;g.prevDragDirection=g.dragDirection};Dygraph.Interaction.treatMouseOpAsClick=function(s,w,u){var p=s.attr_("clickCallback");var g=s.attr_("pointClickCallback");var q=null;if(g){var o=-1;var i=Number.MAX_VALUE;for(var t=0;t<s.selPoints_.length;t++){var v=s.selPoints_[t];var y=Math.pow(v.canvasx-u.dragEndX,2)+Math.pow(v.canvasy-u.dragEndY,2);if(!isNaN(y)&&(o==-1||y<i)){i=y;o=t}}var r=s.attr_("highlightCircleSize")+2;if(i<=r*r){q=s.selPoints_[o]}}if(q){g(w,q)}if(p){p(w,s.lastx_,s.selPoints_)}};Dygraph.Interaction.endZoom=function(j,f,g){g.isZooming=false;g.dragEndX=f.dragGetX_(j,g);g.dragEndY=f.dragGetY_(j,g);var h=Math.abs(g.dragEndX-g.dragStartX);var i=Math.abs(g.dragEndY-g.dragStartY);if(h<2&&i<2&&f.lastx_!==undefined&&f.lastx_!=-1){Dygraph.Interaction.treatMouseOpAsClick(f,j,g)}if(h>=10&&g.dragDirection==Dygraph.HORIZONTAL){f.doZoomX_(Math.min(g.dragStartX,g.dragEndX),Math.max(g.dragStartX,g.dragEndX));g.cancelNextDblclick=true}else{if(i>=10&&g.dragDirection==Dygraph.VERTICAL){f.doZoomY_(Math.min(g.dragStartY,g.dragEndY),Math.max(g.dragStartY,g.dragEndY));g.cancelNextDblclick=true}else{if(zoomMoved){f.clearZoomRect_()}}}g.dragStartX=null;g.dragStartY=null};Dygraph.Interaction.startTouch=function(k,l,m){k.preventDefault();var j=[];for(var n=0;n<k.touches.length;n++){var g=k.touches[n];j.push({pageX:g.pageX,pageY:g.pageY,dataX:l.toDataXCoord(g.pageX),dataY:l.toDataYCoord(g.pageY)})}m.initialTouches=j;if(j.length==1){m.initialPinchCenter=j[0];m.touchDirections={x:true,y:true}}else{if(j.length==2){m.initialPinchCenter={pageX:0.5*(j[0].pageX+j[1].pageX),pageY:0.5*(j[0].pageY+j[1].pageY),dataX:0.5*(j[0].dataX+j[1].dataX),dataY:0.5*(j[0].dataY+j[1].dataY)};var i=180/Math.PI*Math.atan2(m.initialPinchCenter.pageY-j[0].pageY,j[0].pageX-m.initialPinchCenter.pageX);i=Math.abs(i);if(i>90){i=90-i}m.touchDirections={x:(i<(90-45/2)),y:(i>45/2)}}}m.initialRange={x:l.xAxisRange(),y:l.yAxisRange()}};Dygraph.Interaction.moveTouch=function(G,w,F){var z,y=[];for(z=0;z<G.touches.length;z++){var I=G.touches[z];y.push({pageX:I.pageX,pageY:I.pageY})}var g=F.initialTouches;var u;var H=F.initialPinchCenter;if(y.length==1){u=y[0]}else{u={pageX:0.5*(y[0].pageX+y[1].pageX),pageY:0.5*(y[0].pageY+y[1].pageY)}}var A={pageX:u.pageX-H.pageX,pageY:u.pageY-H.pageY};var C=F.initialRange.x[1]-F.initialRange.x[0];var i=F.initialRange.y[0]-F.initialRange.y[1];A.dataX=(A.pageX/w.plotter_.area.w)*C;A.dataY=(A.pageY/w.plotter_.area.h)*i;var t,E;if(y.length==1){t=1;E=1}else{if(y.length==2){var B=(g[1].pageX-H.pageX);t=(y[1].pageX-u.pageX)/B;var v=(g[1].pageY-H.pageY);E=(y[1].pageY-u.pageY)/v}}t=Math.min(8,Math.max(0.125,t));E=Math.min(8,Math.max(0.125,E));if(F.touchDirections.x){w.dateWindow_=[H.dataX-A.dataX+(F.initialRange.x[0]-H.dataX)/t,H.dataX-A.dataX+(F.initialRange.x[1]-H.dataX)/t]}if(F.touchDirections.y){for(z=0;z<1;z++){var D=w.axes_[z];if(D.logscale){}else{D.valueWindow=[H.dataY-A.dataY+(F.initialRange.y[0]-H.dataY)/E,H.dataY-A.dataY+(F.initialRange.y[1]-H.dataY)/E]}}}w.drawGraph_(false)};Dygraph.Interaction.endTouch=function(f,d,e){if(f.touches.length!=0){Dygraph.Interaction.startTouch(f,d,e)}};Dygraph.Interaction.defaultModel={mousedown:function(f,d,e){if(f.button&&f.button==2){return}e.initializeMouseDown(f,d,e);if(f.altKey||f.shiftKey){Dygraph.startPan(f,d,e)}else{Dygraph.startZoom(f,d,e)}},mousemove:function(f,d,e){if(e.isZooming){Dygraph.moveZoom(f,d,e)}else{if(e.isPanning){Dygraph.movePan(f,d,e)}}},mouseup:function(f,d,e){if(e.isZooming){Dygraph.endZoom(f,d,e)}else{if(e.isPanning){Dygraph.endPan(f,d,e)}}},touchstart:function(f,d,e){Dygraph.Interaction.startTouch(f,d,e)},touchmove:function(f,d,e){Dygraph.Interaction.moveTouch(f,d,e)},touchend:function(f,d,e){Dygraph.Interaction.endTouch(f,d,e)},mouseout:function(f,d,e){if(e.isZooming){e.dragEndX=null;e.dragEndY=null}},dblclick:function(f,d,e){if(e.cancelNextDblclick){e.cancelNextDblclick=false;return}if(f.altKey||f.shiftKey){return}d.doUnzoom_()}};Dygraph.DEFAULT_ATTRS.interactionModel=Dygraph.Interaction.defaultModel;Dygraph.defaultInteractionModel=Dygraph.Interaction.defaultModel;Dygraph.endZoom=Dygraph.Interaction.endZoom;Dygraph.moveZoom=Dygraph.Interaction.moveZoom;Dygraph.startZoom=Dygraph.Interaction.startZoom;Dygraph.endPan=Dygraph.Interaction.endPan;Dygraph.movePan=Dygraph.Interaction.movePan;Dygraph.startPan=Dygraph.Interaction.startPan;Dygraph.Interaction.nonInteractiveModel_={mousedown:function(f,d,e){e.initializeMouseDown(f,d,e)},mouseup:function(j,f,g){g.dragEndX=f.dragGetX_(j,g);g.dragEndY=f.dragGetY_(j,g);var h=Math.abs(g.dragEndX-g.dragStartX);var i=Math.abs(g.dragEndY-g.dragStartY);if(h<2&&i<2&&f.lastx_!==undefined&&f.lastx_!=-1){Dygraph.Interaction.treatMouseOpAsClick(f,j,g)}}};Dygraph.Interaction.dragIsPanInteractionModel={mousedown:function(f,d,e){e.initializeMouseDown(f,d,e);Dygraph.startPan(f,d,e)},mousemove:function(f,d,e){if(e.isPanning){Dygraph.movePan(f,d,e)}},mouseup:function(f,d,e){if(e.isPanning){Dygraph.endPan(f,d,e)}}};"use strict";var DygraphRangeSelector=function(b){this.isIE_=/MSIE/.test(navigator.userAgent)&&!window.opera;this.isUsingExcanvas_=b.isUsingExcanvas_;this.dygraph_=b;this.hasTouchInterface_=typeof(TouchEvent)!="undefined";this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion);this.createCanvases_();if(this.isUsingExcanvas_){this.createIEPanOverlay_()}this.createZoomHandles_();this.initInteraction_()};DygraphRangeSelector.prototype.addToGraph=function(d,c){this.layout_=c;this.resize_();d.appendChild(this.bgcanvas_);d.appendChild(this.fgcanvas_);d.appendChild(this.leftZoomHandle_);d.appendChild(this.rightZoomHandle_)};DygraphRangeSelector.prototype.renderStaticLayer=function(){this.resize_();this.drawStaticLayer_()};DygraphRangeSelector.prototype.renderInteractiveLayer=function(){if(this.isChangingRange_){return}this.placeZoomHandles_();this.drawInteractiveLayer_()};DygraphRangeSelector.prototype.resize_=function(){function f(b,a){b.style.top=a.y+"px";b.style.left=a.x+"px";b.width=a.w;b.height=a.h;b.style.width=b.width+"px";b.style.height=b.height+"px"}var d=this.layout_.getPlotArea();var e=this.attr_("xAxisHeight")||(this.attr_("axisLabelFontSize")+2*this.attr_("axisTickSize"));this.canvasRect_={x:d.x,y:d.y+d.h+e+4,w:d.w,h:this.attr_("rangeSelectorHeight")};f(this.bgcanvas_,this.canvasRect_);f(this.fgcanvas_,this.canvasRect_)};DygraphRangeSelector.prototype.attr_=function(b){return this.dygraph_.attr_(b)};DygraphRangeSelector.prototype.createCanvases_=function(){this.bgcanvas_=Dygraph.createCanvas();this.bgcanvas_.className="dygraph-rangesel-bgcanvas";this.bgcanvas_.style.position="absolute";this.bgcanvas_.style.zIndex=9;this.bgcanvas_ctx_=Dygraph.getContext(this.bgcanvas_);this.fgcanvas_=Dygraph.createCanvas();this.fgcanvas_.className="dygraph-rangesel-fgcanvas";this.fgcanvas_.style.position="absolute";this.fgcanvas_.style.zIndex=9;this.fgcanvas_.style.cursor="default";this.fgcanvas_ctx_=Dygraph.getContext(this.fgcanvas_)};DygraphRangeSelector.prototype.createIEPanOverlay_=function(){this.iePanOverlay_=document.createElement("div");this.iePanOverlay_.style.position="absolute";this.iePanOverlay_.style.backgroundColor="white";this.iePanOverlay_.style.filter="alpha(opacity=0)";this.iePanOverlay_.style.display="none";this.iePanOverlay_.style.cursor="move";this.fgcanvas_.appendChild(this.iePanOverlay_)};DygraphRangeSelector.prototype.createZoomHandles_=function(){var b=new Image();b.className="dygraph-rangesel-zoomhandle";b.style.position="absolute";b.style.zIndex=10;b.style.visibility="hidden";b.style.cursor="col-resize";if(/MSIE 7/.test(navigator.userAgent)){b.width=7;b.height=14;b.style.backgroundColor="white";b.style.border="1px solid #333333"}else{b.width=9;b.height=16;b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="}if(this.isMobileDevice_){b.width*=2;b.height*=2}this.leftZoomHandle_=b;this.rightZoomHandle_=b.cloneNode(false)};DygraphRangeSelector.prototype.initInteraction_=function(){var H=this;var N=this.isIE_?document:window;var F=0;var A=null;var C=false;var S=false;var P=!this.isMobileDevice_&&!this.isUsingExcanvas_;var G,Q,D,M,z,O,y,B,E,T,I,L;var R,J,K;G=function(c){var e=H.dygraph_.xAxisExtremes();var b=(e[1]-e[0])/H.canvasRect_.w;var a=e[0]+(c.leftHandlePos-H.canvasRect_.x)*b;var d=e[0]+(c.rightHandlePos-H.canvasRect_.x)*b;return[a,d]};L=function(a){var b=window.outerWidth/document.documentElement.clientWidth;if(!isNaN(b)){return a/b}else{return a}};Q=function(a){Dygraph.cancelEvent(a);C=true;F=a.screenX;A=a.target?a.target:a.srcElement;H.dygraph_.addEvent(N,"mousemove",D);H.dygraph_.addEvent(N,"mouseup",M);H.fgcanvas_.style.cursor="col-resize";return true};D=function(c){if(!C){return false}Dygraph.cancelEvent(c);var b=c.screenX-F;if(Math.abs(b)<4||c.screenX==0){return true}F=c.screenX;b=L(b);var e=H.getZoomHandleStatus_();var d;if(A==H.leftZoomHandle_){d=e.leftHandlePos+b;d=Math.min(d,e.rightHandlePos-A.width-3);d=Math.max(d,H.canvasRect_.x)}else{d=e.rightHandlePos+b;d=Math.min(d,H.canvasRect_.x+H.canvasRect_.w);d=Math.max(d,e.leftHandlePos+A.width+3)}var a=A.width/2;A.style.left=(d-a)+"px";H.drawInteractiveLayer_();if(P){z()}return true};M=function(a){if(!C){return false}C=false;Dygraph.removeEvent(N,"mousemove",D);Dygraph.removeEvent(N,"mouseup",M);H.fgcanvas_.style.cursor="default";if(!P){z()}return true};z=function(){try{var a=H.getZoomHandleStatus_();H.isChangingRange_=true;if(!a.isZoomed){H.dygraph_.doUnzoom_()}else{var b=G(a);H.dygraph_.doZoomXDates_(b[0],b[1])}}finally{H.isChangingRange_=false}};O=function(a){if(H.isUsingExcanvas_){return a.srcElement==H.iePanOverlay_}else{var b=H.leftZoomHandle_.getBoundingClientRect();var d=b.left+b.width/2;b=H.rightZoomHandle_.getBoundingClientRect();var c=b.left+b.width/2;return(a.clientX>d&&a.clientX<c)}};y=function(a){if(!S&&O(a)&&H.getZoomHandleStatus_().isZoomed){Dygraph.cancelEvent(a);S=true;F=a.screenX;H.dygraph_.addEvent(N,"mousemove",B);H.dygraph_.addEvent(N,"mouseup",E);return true}return false};B=function(e){if(!S){return false}Dygraph.cancelEvent(e);var d=e.screenX-F;if(Math.abs(d)<4){return true}F=e.screenX;d=L(d);var g=H.getZoomHandleStatus_();var b=g.leftHandlePos;var f=g.rightHandlePos;var c=f-b;if(b+d<=H.canvasRect_.x){b=H.canvasRect_.x;f=b+c}else{if(f+d>=H.canvasRect_.x+H.canvasRect_.w){f=H.canvasRect_.x+H.canvasRect_.w;b=f-c}else{b+=d;f+=d}}var a=H.leftZoomHandle_.width/2;H.leftZoomHandle_.style.left=(b-a)+"px";H.rightZoomHandle_.style.left=(f-a)+"px";H.drawInteractiveLayer_();if(P){T()}return true};E=function(a){if(!S){return false}S=false;Dygraph.removeEvent(N,"mousemove",B);Dygraph.removeEvent(N,"mouseup",E);if(!P){T()}return true};T=function(){try{H.isChangingRange_=true;H.dygraph_.dateWindow_=G(H.getZoomHandleStatus_());H.dygraph_.drawGraph_(false)}finally{H.isChangingRange_=false}};I=function(b){if(C||S){return}var a=O(b)?"move":"default";if(a!=H.fgcanvas_.style.cursor){H.fgcanvas_.style.cursor=a}};R=function(a){if(a.type=="touchstart"&&a.targetTouches.length==1){if(Q(a.targetTouches[0])){Dygraph.cancelEvent(a)}}else{if(a.type=="touchmove"&&a.targetTouches.length==1){if(D(a.targetTouches[0])){Dygraph.cancelEvent(a)}}else{M(a)}}};J=function(a){if(a.type=="touchstart"&&a.targetTouches.length==1){if(y(a.targetTouches[0])){Dygraph.cancelEvent(a)}}else{if(a.type=="touchmove"&&a.targetTouches.length==1){if(B(a.targetTouches[0])){Dygraph.cancelEvent(a)}}else{E(a)}}};K=function(d,a){var b=["touchstart","touchend","touchmove","touchcancel"];for(var c=0;c<b.length;c++){H.dygraph_.addEvent(d,b[c],a)}};this.dygraph_.attrs_.interactionModel=Dygraph.Interaction.dragIsPanInteractionModel;this.dygraph_.attrs_.panEdgeFraction=0.0001;var U=window.opera?"mousedown":"dragstart";this.dygraph_.addEvent(this.leftZoomHandle_,U,Q);this.dygraph_.addEvent(this.rightZoomHandle_,U,Q);if(this.isUsingExcanvas_){this.dygraph_.addEvent(this.iePanOverlay_,"mousedown",y)}else{this.dygraph_.addEvent(this.fgcanvas_,"mousedown",y);this.dygraph_.addEvent(this.fgcanvas_,"mousemove",I)}if(this.hasTouchInterface_){K(this.leftZoomHandle_,R);K(this.rightZoomHandle_,R);K(this.fgcanvas_,J)}};DygraphRangeSelector.prototype.drawStaticLayer_=function(){var e=this.bgcanvas_ctx_;e.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(d){Dygraph.warn(d)}var f=0.5;this.bgcanvas_ctx_.lineWidth=1;e.strokeStyle="gray";e.beginPath();e.moveTo(f,f);e.lineTo(f,this.canvasRect_.h-f);e.lineTo(this.canvasRect_.w-f,this.canvasRect_.h-f);e.lineTo(this.canvasRect_.w-f,f);e.stroke()};DygraphRangeSelector.prototype.drawMiniPlot_=function(){var t=this.attr_("rangeSelectorPlotFillColor");var y=this.attr_("rangeSelectorPlotStrokeColor");if(!t&&!y){return}var w=this.computeCombinedSeriesAndLimits_();var E=w.yMax-w.yMin;var i=this.bgcanvas_ctx_;var D=0.5;var A=this.dygraph_.xAxisExtremes();var H=Math.max(A[1]-A[0],1e-30);var s=(this.canvasRect_.w-D)/H;var u=(this.canvasRect_.h-D)/E;var F=this.canvasRect_.w-D;var B=this.canvasRect_.h-D;i.beginPath();i.moveTo(D,B);for(var C=0;C<w.data.length;C++){var I=w.data[C];var v=(I[0]-A[0])*s;var z=B-(I[1]-w.yMin)*u;if(isFinite(v)&&isFinite(z)){i.lineTo(v,z)}}i.lineTo(F,B);i.closePath();if(t){var G=this.bgcanvas_ctx_.createLinearGradient(0,0,0,B);G.addColorStop(0,"white");G.addColorStop(1,t);this.bgcanvas_ctx_.fillStyle=G;i.fill()}if(y){this.bgcanvas_ctx_.strokeStyle=y;this.bgcanvas_ctx_.lineWidth=1.5;i.stroke()}};DygraphRangeSelector.prototype.computeCombinedSeriesAndLimits_=function(){var i=this.dygraph_.rawData_;var j=this.attr_("logscale");var y=[];var I;var E;var C;var k,v,w;var H,F;for(k=0;k<i.length;k++){if(i[k].length>1&&i[k][1]!==null){C=typeof i[k][1]!="number";if(C){I=[];E=[];for(w=0;w<i[k][1].length;w++){I.push(0);E.push(0)}}break}}for(k=0;k<i.length;k++){var D=i[k];H=D[0];if(C){for(w=0;w<I.length;w++){I[w]=E[w]=0}}else{I=E=0}for(v=1;v<D.length;v++){if(this.dygraph_.visibility()[v-1]){var B;if(C){for(w=0;w<I.length;w++){B=D[v][w];if(B===null||isNaN(B)){continue}I[w]+=B;E[w]++}}else{B=D[v];if(B===null||isNaN(B)){continue}I+=B;E++}}}if(C){for(w=0;w<I.length;w++){I[w]/=E[w]}F=I.slice(0)}else{F=I/E}y.push([H,F])}y=this.dygraph_.rollingAverage(y,this.dygraph_.rollPeriod_);if(typeof y[0][1]!="number"){for(k=0;k<y.length;k++){F=y[k][1];y[k][1]=F[0]}}var K=Number.MAX_VALUE;var J=-Number.MAX_VALUE;for(k=0;k<y.length;k++){F=y[k][1];if(F!==null&&isFinite(F)&&(!j||F>0)){K=Math.min(K,F);J=Math.max(J,F)}}var A=0.25;if(j){J=Dygraph.log10(J);J+=J*A;K=Dygraph.log10(K);for(k=0;k<y.length;k++){y[k][1]=Dygraph.log10(y[k][1])}}else{var G;var z=J-K;if(z<=Number.MIN_VALUE){G=J*A}else{G=z*A}J+=G;K-=G}return{data:y,yMin:K,yMax:J}};DygraphRangeSelector.prototype.placeZoomHandles_=function(){var l=this.dygraph_.xAxisExtremes();var r=this.dygraph_.xAxisRange();var q=l[1]-l[0];var j=Math.max(0,(r[0]-l[0])/q);var n=Math.max(0,(l[1]-r[1])/q);var k=this.canvasRect_.x+this.canvasRect_.w*j;var o=this.canvasRect_.x+this.canvasRect_.w*(1-n);var p=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2);var m=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=(k-m)+"px";this.leftZoomHandle_.style.top=p+"px";this.rightZoomHandle_.style.left=(o-m)+"px";this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top;this.leftZoomHandle_.style.visibility="visible";this.rightZoomHandle_.style.visibility="visible"};DygraphRangeSelector.prototype.drawInteractiveLayer_=function(){var h=this.fgcanvas_ctx_;h.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var l=1;var m=this.canvasRect_.w-l;var i=this.canvasRect_.h-l;var j=this.getZoomHandleStatus_();h.strokeStyle="black";if(!j.isZoomed){h.beginPath();h.moveTo(l,l);h.lineTo(l,i);h.lineTo(m,i);h.lineTo(m,l);h.stroke();if(this.iePanOverlay_){this.iePanOverlay_.style.display="none"}}else{var k=Math.max(l,j.leftHandlePos-this.canvasRect_.x);var n=Math.min(m,j.rightHandlePos-this.canvasRect_.x);h.fillStyle="rgba(240, 240, 240, 0.6)";h.fillRect(0,0,k,this.canvasRect_.h);h.fillRect(n,0,this.canvasRect_.w-n,this.canvasRect_.h);h.beginPath();h.moveTo(l,l);h.lineTo(k,l);h.lineTo(k,i);h.lineTo(n,i);h.lineTo(n,l);h.lineTo(m,l);h.stroke();if(this.isUsingExcanvas_){this.iePanOverlay_.style.width=(n-k)+"px";this.iePanOverlay_.style.left=k+"px";this.iePanOverlay_.style.height=i+"px";this.iePanOverlay_.style.display="inline"}}};DygraphRangeSelector.prototype.getZoomHandleStatus_=function(){var d=this.leftZoomHandle_.width/2;var f=parseInt(this.leftZoomHandle_.style.left,10)+d;var e=parseInt(this.rightZoomHandle_.style.left,10)+d;return{leftHandlePos:f,rightHandlePos:e,isZoomed:(f-1>this.canvasRect_.x||e+1<this.canvasRect_.x+this.canvasRect_.w)}};"use strict";Dygraph.numericLinearTicks=function(m,n,a,j,k,b){var l=function(c){if(c==="logscale"){return false}return j(c)};return Dygraph.numericTicks(m,n,a,l,k,b)};Dygraph.numericTicks=function(k,O,R,ab,an,Z){var W=ab("pixelsPerLabel");var i=[];var Q,U,T,aa;if(Z){for(Q=0;Q<Z.length;Q++){i.push({v:Z[Q]})}}else{if(ab("logscale")){aa=Math.floor(R/W);var ag=Dygraph.binarySearch(k,Dygraph.PREFERRED_LOG_TICK_VALUES,1);var b=Dygraph.binarySearch(O,Dygraph.PREFERRED_LOG_TICK_VALUES,-1);if(ag==-1){ag=0}if(b==-1){b=Dygraph.PREFERRED_LOG_TICK_VALUES.length-1}var V=null;if(b-ag>=aa/4){for(var X=b;X>=ag;X--){var af=Dygraph.PREFERRED_LOG_TICK_VALUES[X];var ah=Math.log(af/k)/Math.log(O/k)*R;var P={v:af};if(V===null){V={tickValue:af,pixel_coord:ah}}else{if(Math.abs(ah-V.pixel_coord)>=W){V={tickValue:af,pixel_coord:ah}}else{P.label=""}}i.push(P)}i.reverse()}}if(i.length===0){var aj=ab("labelsKMG2");var ad;if(aj){ad=[1,2,4,8]}else{ad=[1,2,5]}var a,ac,ao;for(Q=-10;Q<50;Q++){var ak;if(aj){ak=Math.pow(16,Q)}else{ak=Math.pow(10,Q)}var al=0;for(U=0;U<ad.length;U++){a=ak*ad[U];ac=Math.floor(k/a)*a;ao=Math.ceil(O/a)*a;aa=Math.abs(ao-ac)/a;al=R/aa;if(al>W){break}}if(al>W){break}}if(ac>ao){a*=-1}for(Q=0;Q<aa;Q++){T=ac+Q*a;i.push({v:T})}}}var Y;var ae=[];var j=[];if(ab("labelsKMB")){Y=1000;ae=["K","M","B","T","Q"]}if(ab("labelsKMG2")){if(Y){Dygraph.warn("Setting both labelsKMB and labelsKMG2. Pick one!")}Y=1024;ae=["k","M","G","T","P","E","Z","Y"];j=["m","u","n","p","f","a","z","y"]}var S=ab("axisLabelFormatter");for(Q=0;Q<i.length;Q++){if(i[Q].label!==undefined){continue}T=i[Q].v;var am=Math.abs(T);var ai=S(T,0,ab,an);if(ae.length>0){var n=Math.pow(Y,ae.length);for(U=ae.length-1;U>=0;U--,n/=Y){if(am>=n){ai=Dygraph.round_(T/n,ab("digitsAfterDecimal"))+ae[U];break}}}if(ab("labelsKMG2")){T=String(T.toExponential());if(T.split("e-").length===2&&T.split("e-")[1]>=3&&T.split("e-")[1]<=24){if(T.split("e-")[1]%3>0){ai=Dygraph.round_(T.split("e-")[0]/Math.pow(10,(T.split("e-")[1]%3)),ab("digitsAfterDecimal"))}else{ai=Number(T.split("e-")[0]).toFixed(2)}ai+=j[Math.floor(T.split("e-")[1]/3)-1]}}i[Q].label=ai}return i};Dygraph.dateTicker=function(l,n,a,j,k,b){var m=Dygraph.pickDateTickGranularity(l,n,a,j);if(m>=0){return Dygraph.getDateAxis(l,n,m,j,k)}else{return[]}};Dygraph.SECONDLY=0;Dygraph.TWO_SECONDLY=1;Dygraph.FIVE_SECONDLY=2;Dygraph.TEN_SECONDLY=3;Dygraph.THIRTY_SECONDLY=4;Dygraph.MINUTELY=5;Dygraph.TWO_MINUTELY=6;Dygraph.FIVE_MINUTELY=7;Dygraph.TEN_MINUTELY=8;Dygraph.THIRTY_MINUTELY=9;Dygraph.HOURLY=10;Dygraph.TWO_HOURLY=11;Dygraph.SIX_HOURLY=12;Dygraph.DAILY=13;Dygraph.WEEKLY=14;Dygraph.MONTHLY=15;Dygraph.QUARTERLY=16;Dygraph.BIANNUAL=17;Dygraph.ANNUAL=18;Dygraph.DECADAL=19;Dygraph.CENTENNIAL=20;Dygraph.NUM_GRANULARITIES=21;Dygraph.SHORT_SPACINGS=[];Dygraph.SHORT_SPACINGS[Dygraph.SECONDLY]=1000*1;Dygraph.SHORT_SPACINGS[Dygraph.TWO_SECONDLY]=1000*2;Dygraph.SHORT_SPACINGS[Dygraph.FIVE_SECONDLY]=1000*5;Dygraph.SHORT_SPACINGS[Dygraph.TEN_SECONDLY]=1000*10;Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_SECONDLY]=1000*30;Dygraph.SHORT_SPACINGS[Dygraph.MINUTELY]=1000*60;Dygraph.SHORT_SPACINGS[Dygraph.TWO_MINUTELY]=1000*60*2;Dygraph.SHORT_SPACINGS[Dygraph.FIVE_MINUTELY]=1000*60*5;Dygraph.SHORT_SPACINGS[Dygraph.TEN_MINUTELY]=1000*60*10;Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_MINUTELY]=1000*60*30;Dygraph.SHORT_SPACINGS[Dygraph.HOURLY]=1000*3600;Dygraph.SHORT_SPACINGS[Dygraph.TWO_HOURLY]=1000*3600*2;Dygraph.SHORT_SPACINGS[Dygraph.SIX_HOURLY]=1000*3600*6;Dygraph.SHORT_SPACINGS[Dygraph.DAILY]=1000*86400;Dygraph.SHORT_SPACINGS[Dygraph.WEEKLY]=1000*604800;Dygraph.PREFERRED_LOG_TICK_VALUES=function(){var j=[];for(var f=-39;f<=39;f++){var g=Math.pow(10,f);for(var i=1;i<=9;i++){var h=g*i;j.push(h)}}return j}();Dygraph.pickDateTickGranularity=function(m,n,a,b){var i=b("pixelsPerLabel");for(var k=0;k<Dygraph.NUM_GRANULARITIES;k++){var l=Dygraph.numDateTicks(m,n,k);if(a/l>=i){return k}}return -1};Dygraph.numDateTicks=function(n,i,l){if(l<Dygraph.MONTHLY){var k=Dygraph.SHORT_SPACINGS[l];return Math.floor(0.5+1*(i-n)/k)}else{var m=1;var o=12;if(l==Dygraph.QUARTERLY){o=3}if(l==Dygraph.BIANNUAL){o=2}if(l==Dygraph.ANNUAL){o=1}if(l==Dygraph.DECADAL){o=1;m=10}if(l==Dygraph.CENTENNIAL){o=1;m=100}var p=365.2524*24*3600*1000;var j=1*(i-n)/p;return Math.floor(0.5+1*j*o/m)}};Dygraph.getDateAxis=function(F,J,O,H,i){var t=H("axisLabelFormatter");var d=[];var I;if(O<Dygraph.MONTHLY){var M=Dygraph.SHORT_SPACINGS[O];var j=M/1000;var g=new Date(F);g.setMilliseconds(0);var K;if(j<=60){K=g.getSeconds();g.setSeconds(K-K%j)}else{g.setSeconds(0);j/=60;if(j<=60){K=g.getMinutes();g.setMinutes(K-K%j)}else{g.setMinutes(0);j/=60;if(j<=24){K=g.getHours();g.setHours(K-K%j)}else{g.setHours(0);j/=24;if(j==7){g.setDate(g.getDate()-g.getDay())}}}}F=g.getTime();for(I=F;I<=J;I+=M){d.push({v:I,label:t(new Date(I),O,H,i)})}}else{var L;var E=1;if(O==Dygraph.MONTHLY){L=[0,1,2,3,4,5,6,7,8,9,10,11]}else{if(O==Dygraph.QUARTERLY){L=[0,3,6,9]}else{if(O==Dygraph.BIANNUAL){L=[0,6]}else{if(O==Dygraph.ANNUAL){L=[0]}else{if(O==Dygraph.DECADAL){L=[0];E=10}else{if(O==Dygraph.CENTENNIAL){L=[0];E=100}else{Dygraph.warn("Span of dates is too long")}}}}}}var A=new Date(F).getFullYear();var D=new Date(J).getFullYear();var N=Dygraph.zeropad;for(var B=A;B<=D;B++){if(B%E!==0){continue}for(var C=0;C<L.length;C++){var G=B+"/"+N(1+L[C])+"/01";I=Dygraph.dateStrToMillis(G);if(I<F||I>J){continue}d.push({v:I,label:t(new Date(I),O,H,i)})}}}return d};Dygraph.DEFAULT_ATTRS.axes.x.ticker=Dygraph.dateTicker;Dygraph.DEFAULT_ATTRS.axes.y.ticker=Dygraph.numericTicks;Dygraph.DEFAULT_ATTRS.axes.y2.ticker=Dygraph.numericTicks;"use strict";function RGBColor(m){this.ok=false;if(m.charAt(0)=="#"){m=m.substr(1,6)}m=m.replace(/ /g,"");m=m.toLowerCase();var q={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var l in q){if(m==l){m=q[l]}}var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];for(var p=0;p<n.length;p++){var i=n[p].re;var r=n[p].process;var k=i.exec(m);if(k){var o=r(k);this.r=o[0];this.g=o[1];this.b=o[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var a=this.r.toString(16);var b=this.g.toString(16);var c=this.b.toString(16);if(a.length==1){a="0"+a}if(b.length==1){b="0"+b}if(c.length==1){c="0"+c}return"#"+a+b+c}}Date.ext={};Date.ext.util={};Date.ext.util.xPad=function(e,f,d){if(typeof(d)=="undefined"){d=10}for(;parseInt(e,10)<d&&d>1;d/=10){e=f.toString()+e}return e.toString()};Date.prototype.locale="en-GB";if(document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang){Date.prototype.locale=document.getElementsByTagName("html")[0].lang}Date.ext.locales={};Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"};Date.ext.locales["en-US"]=Date.ext.locales.en;Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z";Date.ext.locales["en-US"].x="%D";Date.ext.locales["en-US"].X="%r";Date.ext.locales["en-GB"]=Date.ext.locales.en;Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"];Date.ext.formats={a:function(b){return Date.ext.locales[b.locale].a[b.getDay()]},A:function(b){return Date.ext.locales[b.locale].A[b.getDay()]},b:function(b){return Date.ext.locales[b.locale].b[b.getMonth()]},B:function(b){return Date.ext.locales[b.locale].B[b.getMonth()]},c:"toLocaleString",C:function(b){return Date.ext.util.xPad(parseInt(b.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(b){return Date.ext.util.xPad(parseInt(Date.ext.util.G(b)/100,10),0)},G:function(h){var g=h.getFullYear();var d=parseInt(Date.ext.formats.V(h),10);var f=parseInt(Date.ext.formats.W(h),10);if(f>d){g++}else{if(f===0&&d>=52){g--}}return g},H:["getHours","0"],I:function(c){var d=c.getHours()%12;return Date.ext.util.xPad(d===0?12:d,0)},j:function(f){var e=f-new Date(""+f.getFullYear()+"/1/1 GMT");e+=f.getTimezoneOffset()*60000;var d=parseInt(e/60000/60/24,10)+1;return Date.ext.util.xPad(d,0,100)},m:function(b){return Date.ext.util.xPad(b.getMonth()+1,0)},M:["getMinutes","0"],p:function(b){return Date.ext.locales[b.locale].p[b.getHours()>=12?1:0]},P:function(b){return Date.ext.locales[b.locale].P[b.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(d){var c=d.getDay();return c===0?7:c},U:function(g){var f=parseInt(Date.ext.formats.j(g),10);var h=6-g.getDay();var d=parseInt((f+h)/7,10);return Date.ext.util.xPad(d,0)},V:function(g){var h=parseInt(Date.ext.formats.W(g),10);var f=(new Date(""+g.getFullYear()+"/1/1")).getDay();var d=h+(f>4||f<=1?0:1);if(d==53&&(new Date(""+g.getFullYear()+"/12/31")).getDay()<4){d=1}else{if(d===0){d=Date.ext.formats.V(new Date(""+(g.getFullYear()-1)+"/12/31"))}}return Date.ext.util.xPad(d,0)},w:"getDay",W:function(g){var f=parseInt(Date.ext.formats.j(g),10);var h=7-Date.ext.formats.u(g);var d=parseInt((f+h)/7,10);return Date.ext.util.xPad(d,0,10)},y:function(b){return Date.ext.util.xPad(b.getFullYear()%100,0)},Y:"getFullYear",z:function(h){var d=h.getTimezoneOffset();var f=Date.ext.util.xPad(parseInt(Math.abs(d/60),10),0);var g=Date.ext.util.xPad(d%60,0);return(d>0?"-":"+")+f+g},Z:function(b){return b.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(b){return"%"}};Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};Date.ext.aggregates.z=Date.ext.formats.z(new Date());Date.ext.aggregates.Z=Date.ext.formats.Z(new Date());Date.ext.unsupported={};Date.prototype.strftime=function(e){if(!(this.locale in Date.ext.locales)){if(this.locale.replace(/-[a-zA-Z]+$/,"") in Date.ext.locales){this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")}else{this.locale="en-GB"}}var f=this;while(e.match(/%[cDhnrRtTxXzZ]/)){e=e.replace(/%([cDhnrRtTxXzZ])/g,function(b,c){var a=Date.ext.aggregates[c];return(a=="locale"?Date.ext.locales[f.locale][c]:a)})}var d=e.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(b,c){var a=Date.ext.formats[c];if(typeof(a)=="string"){return f[a]()}else{if(typeof(a)=="function"){return a.call(f,f)}else{if(typeof(a)=="object"&&typeof(a[0])=="string"){return Date.ext.util.xPad(f[a[0]](),a[1])}else{return c}}}});f=null;return d};CanvasRenderingContext2D.prototype.installPattern=function(l){if(typeof(this.isPatternInstalled)!=="undefined"){throw"Must un-install old line pattern before installing a new one."}this.isPatternInstalled=true;var j=[0,0];var h=[];var k=this.beginPath;var m=this.lineTo;var n=this.moveTo;var i=this.stroke;this.uninstallPattern=function(){this.beginPath=k;this.lineTo=m;this.moveTo=n;this.stroke=i;this.uninstallPattern=undefined;this.isPatternInstalled=undefined};this.beginPath=function(){h=[];k.call(this)};this.moveTo=function(b,a){h.push([[b,a]]);n.call(this,b,a)};this.lineTo=function(c,a){var b=h[h.length-1];b.push([c,a])};this.stroke=function(){if(h.length===0){i.call(this);return}for(var c=0;c<h.length;c++){var d=h[c];var g=d[0][0],A=d[0][1];for(var e=1;e<d.length;e++){var w=d[e][0],a=d[e][1];this.save();var y=(w-g);var z=(a-A);var b=Math.sqrt(y*y+z*z);var v=Math.atan2(z,y);this.translate(g,A);n.call(this,0,0);this.rotate(v);var f=j[0];x=0;while(b>x){segment=l[f];if(j[1]){x+=j[1]}else{x+=segment}if(x>b){j=[f,x-b];x=b}else{j=[(f+1)%l.length,0]}if(f%2===0){m.call(this,x,0)}else{n.call(this,x,0)}f=(f+1)%l.length}this.restore();g=w,A=a}}i.call(this);h=[]}};CanvasRenderingContext2D.prototype.uninstallPattern=function(){throw"Must install a line pattern before uninstalling it."};Dygraph.Plugins={};Dygraph.Plugins.Annotations=(function(){var b=function(){this.annotations_=[]};b.prototype.toString=function(){return"Annotations Plugin"};b.prototype.activate=function(a){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}};b.prototype.detachLabels=function(){for(var d=0;d<this.annotations_.length;d++){var a=this.annotations_[d];if(a.parentNode){a.parentNode.removeChild(a)}this.annotations_[d]=null}this.annotations_=[]};b.prototype.clearChart=function(a){this.detachLabels()};b.prototype.didDrawChart=function(g){var p=g.dygraph;var H=p.layout_.annotated_points;if(!H||H.length==0){return}var e=g.canvas.parentNode;var w={position:"absolute",fontSize:p.getOption("axisLabelFontSize")+"px",zIndex:10,overflow:"hidden"};var i=function(f,d,c){return function(h){var j=c.annotation;if(j.hasOwnProperty(f)){j[f](j,c,p,h)}else{if(p.getOption(d)){p.getOption(d)(j,c,p,h)}}}};var A=g.dygraph.plotter_.area;for(var y=0;y<H.length;y++){var B=H[y];if(B.canvasx<A.x||B.canvasx>A.x+A.w||B.canvasy<A.y||B.canvasy>A.y+A.h){continue}var a=B.annotation;var I=6;if(a.hasOwnProperty("tickHeight")){I=a.tickHeight}var D=document.createElement("div");for(var E in w){if(w.hasOwnProperty(E)){D.style[E]=w[E]}}if(!a.hasOwnProperty("icon")){D.className="dygraphDefaultAnnotation"}if(a.hasOwnProperty("cssClass")){D.className+=" "+a.cssClass}var C=a.hasOwnProperty("width")?a.width:16;var G=a.hasOwnProperty("height")?a.height:16;if(a.hasOwnProperty("icon")){var z=document.createElement("img");z.src=a.icon;z.width=C;z.height=G;D.appendChild(z)}else{if(B.annotation.hasOwnProperty("shortText")){D.appendChild(document.createTextNode(B.annotation.shortText))}}D.style.left=(B.canvasx-C/2)+"px";if(a.attachAtBottom){D.style.top=(A.h-G-I)+"px"}else{D.style.top=(B.canvasy-G-I)+"px"}D.style.width=C+"px";D.style.height=G+"px";D.title=B.annotation.text;D.style.color=p.colorsMap_[B.name];D.style.borderColor=p.colorsMap_[B.name];a.div=D;p.addEvent(D,"click",i("clickHandler","annotationClickHandler",B,this));p.addEvent(D,"mouseover",i("mouseOverHandler","annotationMouseOverHandler",B,this));p.addEvent(D,"mouseout",i("mouseOutHandler","annotationMouseOutHandler",B,this));p.addEvent(D,"dblclick",i("dblClickHandler","annotationDblClickHandler",B,this));e.appendChild(D);this.annotations_.push(D);var F=g.drawingContext;F.save();F.strokeStyle=p.colorsMap_[B.name];F.beginPath();if(!a.attachAtBottom){F.moveTo(B.canvasx,B.canvasy);F.lineTo(B.canvasx,B.canvasy-2-I)}else{F.moveTo(B.canvasx,A.h);F.lineTo(B.canvasx,A.h-2-I)}F.closePath();F.stroke();F.restore()}};b.prototype.destroy=function(){this.detachLabels()};return b})();Dygraph.Plugins.Axes=(function(){var b=function(){this.xlabels_=[];this.ylabels_=[]};b.prototype.toString=function(){return"Axes Plugin"};b.prototype.activate=function(a){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}};b.prototype.layout=function(e){var g=e.dygraph;if(g.getOption("drawYAxis")){var a=g.getOption("yAxisLabelWidth")+2*g.getOption("axisTickSize");var h=e.reserveSpaceLeft(a)}if(g.getOption("drawXAxis")){var l;if(g.getOption("xAxisHeight")){l=g.getOption("xAxisHeight")}else{l=g.getOption("axisLabelFontSize")+2*g.getOption("axisTickSize")}var n=e.reserveSpaceBottom(l)}if(g.numAxes()==2){var a=g.getOption("yAxisLabelWidth")+2*g.getOption("axisTickSize");var m=e.reserveSpaceRight(a)}else{if(g.numAxes()>2){g.error("Only two y-axes are supported at this time. (Trying to use "+g.numAxes()+")")}}};b.prototype.detachLabels=function(){function a(g){for(var h=0;h<g.length;h++){var f=g[h];if(f.parentNode){f.parentNode.removeChild(f)}}}a(this.xlabels_);a(this.ylabels_);this.xlabels_=[];this.ylabels_=[]};b.prototype.clearChart=function(d){var a=d.dygraph;this.detachLabels()};b.prototype.willDrawChart=function(r){var L=r.dygraph;if(!L.getOption("drawXAxis")&&!L.getOption("drawYAxis")){return}function R(c){return Math.round(c)+0.5}function T(c){return Math.round(c)-0.5}var Y=r.drawingContext;var y=r.canvas.parentNode;var e=r.canvas.width;var ab=r.canvas.height;var N,K,M,O,P;var ae={position:"absolute",fontSize:L.getOption("axisLabelFontSize")+"px",zIndex:10,color:L.getOption("axisLabelColor"),width:L.getOption("axisLabelWidth")+"px",lineHeight:"normal",overflow:"hidden"};var V=function(j,h,k){var c=document.createElement("div");for(var d in ae){if(ae.hasOwnProperty(d)){c.style[d]=ae[d]}}var f=document.createElement("div");f.className="dygraph-axis-label dygraph-axis-label-"+h+(k?" dygraph-axis-label-"+k:"");f.innerHTML=j;c.appendChild(f);return c};Y.save();Y.strokeStyle=L.getOption("axisLineColor");Y.lineWidth=L.getOption("axisLineWidth");var i=L.layout_;var J=r.dygraph.plotter_.area;if(L.getOption("drawYAxis")){if(i.yticks&&i.yticks.length>0){var Z=L.numAxes();for(P=0;P<i.yticks.length;P++){O=i.yticks[P];if(typeof(O)=="function"){return}K=J.x;var S=1;var aa="y1";if(O[0]==1){K=J.x+J.w;S=-1;aa="y2"}M=J.y+O[1]*J.h;N=V(O[2],"y",Z==2?aa:null);var a=(M-L.getOption("axisLabelFontSize")/2);if(a<0){a=0}if(a+L.getOption("axisLabelFontSize")+3>ab){N.style.bottom="0px"}else{N.style.top=a+"px"}if(O[0]===0){N.style.left=(J.x-L.getOption("yAxisLabelWidth")-L.getOption("axisTickSize"))+"px";N.style.textAlign="right"}else{if(O[0]==1){N.style.left=(J.x+J.w+L.getOption("axisTickSize"))+"px";N.style.textAlign="left"}}N.style.width=L.getOption("yAxisLabelWidth")+"px";y.appendChild(N);this.ylabels_.push(N)}var U=this.ylabels_[0];var X=L.getOption("axisLabelFontSize");var Q=parseInt(U.style.top,10)+X;if(Q>ab-X){U.style.top=(parseInt(U.style.top,10)-X/2)+"px"}}var ac;if(L.getOption("drawAxesAtZero")){var g=L.toPercentXCoord(0);if(g>1||g<0){g=0}ac=R(J.x+g*J.w)}else{ac=R(J.x)}Y.beginPath();Y.moveTo(ac,T(J.y));Y.lineTo(ac,T(J.y+J.h));Y.closePath();Y.stroke();if(L.numAxes()==2){Y.beginPath();Y.moveTo(T(J.x+J.w),T(J.y));Y.lineTo(T(J.x+J.w),T(J.y+J.h));Y.closePath();Y.stroke()}}if(L.getOption("drawXAxis")){if(i.xticks){for(P=0;P<i.xticks.length;P++){O=i.xticks[P];K=J.x+O[0]*J.w;M=J.y+J.h;N=V(O[1],"x");N.style.textAlign="center";N.style.top=(M+L.getOption("axisTickSize"))+"px";var W=(K-L.getOption("axisLabelWidth")/2);if(W+L.getOption("axisLabelWidth")>e){W=e-L.getOption("xAxisLabelWidth");N.style.textAlign="right"}if(W<0){W=0;N.style.textAlign="left"}N.style.left=W+"px";N.style.width=L.getOption("xAxisLabelWidth")+"px";y.appendChild(N);this.xlabels_.push(N)}}Y.beginPath();var ad;if(L.getOption("drawAxesAtZero")){var g=L.toPercentYCoord(0,0);if(g>1||g<0){g=1}ad=T(J.y+g*J.h)}else{ad=T(J.y+J.h)}Y.moveTo(R(J.x),ad);Y.lineTo(R(J.x+J.w),ad);Y.closePath();Y.stroke()}Y.restore()};return b})();Dygraph.Plugins.ChartLabels=(function(){var f=function(){this.title_div_=null;this.xlabel_div_=null;this.ylabel_div_=null;this.y2label_div_=null};f.prototype.toString=function(){return"ChartLabels Plugin"};f.prototype.activate=function(a){return{layout:this.layout,didDrawChart:this.didDrawChart}};var d=function(b){var a=document.createElement("div");a.style.position="absolute";a.style.left=b.x+"px";a.style.top=b.y+"px";a.style.width=b.w+"px";a.style.height=b.h+"px";return a};f.prototype.detachLabels_=function(){var b=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_];for(var c=0;c<b.length;c++){var a=b[c];if(!a){continue}if(a.parentNode){a.parentNode.removeChild(a)}}this.title_div_=null;this.xlabel_div_=null;this.ylabel_div_=null;this.y2label_div_=null};var e=function(b,n,p,o,g){var r=document.createElement("div");r.style.position="absolute";if(p==1){r.style.left="0px"}else{r.style.left=n.x+"px"}r.style.top=n.y+"px";r.style.width=n.w+"px";r.style.height=n.h+"px";r.style.fontSize=(b.getOption("yLabelWidth")-2)+"px";var a=document.createElement("div");a.style.position="absolute";a.style.width=n.h+"px";a.style.height=n.w+"px";a.style.top=(n.h/2-n.w/2)+"px";a.style.left=(n.w/2-n.h/2)+"px";a.style.textAlign="center";var q="rotate("+(p==1?"-":"")+"90deg)";a.style.transform=q;a.style.WebkitTransform=q;a.style.MozTransform=q;a.style.OTransform=q;a.style.msTransform=q;if(typeof(document.documentMode)!=="undefined"&&document.documentMode<9){a.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+(p==1?"3":"1")+")";a.style.left="0px";a.style.top="0px"}var c=document.createElement("div");c.className=o;c.innerHTML=g;a.appendChild(c);r.appendChild(a);return r};f.prototype.layout=function(c){this.detachLabels_();var n=c.dygraph;var a=c.chart_div;if(n.getOption("title")){var q=c.reserveSpaceTop(n.getOption("titleHeight"));this.title_div_=d(q);this.title_div_.style.textAlign="center";this.title_div_.style.fontSize=(n.getOption("titleHeight")-8)+"px";this.title_div_.style.fontWeight="bold";var p=document.createElement("div");p.className="dygraph-label dygraph-title";p.innerHTML=n.getOption("title");this.title_div_.appendChild(p);a.appendChild(this.title_div_)}if(n.getOption("xlabel")){var g=c.reserveSpaceBottom(n.getOption("xLabelHeight"));this.xlabel_div_=d(g);this.xlabel_div_.style.textAlign="center";this.xlabel_div_.style.fontSize=(n.getOption("xLabelHeight")-2)+"px";var p=document.createElement("div");p.className="dygraph-label dygraph-xlabel";p.innerHTML=n.getOption("xlabel");this.xlabel_div_.appendChild(p);a.appendChild(this.xlabel_div_)}if(n.getOption("ylabel")){var o=c.reserveSpaceLeft(0);this.ylabel_div_=e(n,o,1,"dygraph-label dygraph-ylabel",n.getOption("ylabel"));a.appendChild(this.ylabel_div_)}if(n.getOption("y2label")&&n.numAxes()==2){var b=c.reserveSpaceRight(0);this.y2label_div_=e(n,b,2,"dygraph-label dygraph-y2label",n.getOption("y2label"));a.appendChild(this.y2label_div_)}};f.prototype.didDrawChart=function(a){var b=a.dygraph;if(this.title_div_){this.title_div_.children[0].innerHTML=b.getOption("title")}if(this.xlabel_div_){this.xlabel_div_.children[0].innerHTML=b.getOption("xlabel")}if(this.ylabel_div_){this.ylabel_div_.children[0].children[0].innerHTML=b.getOption("ylabel")}if(this.y2label_div_){this.y2label_div_.children[0].children[0].innerHTML=b.getOption("y2label")}};f.prototype.clearChart=function(){};f.prototype.destroy=function(){detachLabels()};return f})();Dygraph.Plugins.Grid=(function(){var b=function(){};b.prototype.toString=function(){return"Gridline Plugin"};b.prototype.activate=function(a){return{willDrawChart:this.willDrawChart}};b.prototype.willDrawChart=function(p){var r=p.dygraph;var a=p.drawingContext;var q=r.layout_;var u=p.dygraph.plotter_.area;function v(c){return Math.round(c)+0.5}function t(c){return Math.round(c)-0.5}var g,i,s,e;if(r.getOption("drawYGrid")){e=q.yticks;a.save();a.strokeStyle=r.getOption("gridLineColor");a.lineWidth=r.getOption("gridLineWidth");for(s=0;s<e.length;s++){if(e[s][0]!==0){continue}g=v(u.x);i=t(u.y+e[s][1]*u.h);a.beginPath();a.moveTo(g,i);a.lineTo(g+u.w,i);a.closePath();a.stroke()}a.restore()}if(r.getOption("drawXGrid")){e=q.xticks;a.save();a.strokeStyle=r.getOption("gridLineColor");a.lineWidth=r.getOption("gridLineWidth");for(s=0;s<e.length;s++){g=v(u.x+e[s][0]*u.w);i=t(u.y+u.h);a.beginPath();a.moveTo(g,i);a.lineTo(g,u.y);a.closePath();a.stroke()}a.restore()}};b.prototype.destroy=function(){};return b})();Dygraph.Plugins.Legend=(function(){var h=function(){this.legend_div_=null;this.is_generated_div_=false};h.prototype.toString=function(){return"Legend Plugin"};h.prototype.activate=function(d){var a;var p=d.getOption("labelsDivWidth");var b=d.getOption("labelsDiv");if(b&&null!==b){if(typeof(b)=="string"||b instanceof String){a=document.getElementById(b)}else{a=b}}else{var n={position:"absolute",fontSize:"14px",zIndex:10,width:p+"px",top:"0px",left:(d.size().width-p-2)+"px",background:"white",lineHeight:"normal",textAlign:"left",overflow:"hidden"};Dygraph.update(n,d.getOption("labelsDivStyles"));a=document.createElement("div");a.className="dygraph-legend";for(var o in n){if(!n.hasOwnProperty(o)){continue}try{a.style[o]=n[o]}catch(c){this.warn("You are using unsupported css properties for your browser in labelsDivStyles")}}d.graphDiv.appendChild(a);this.is_generated_div_=true}this.legend_div_=a;this.one_em_width_=10;return{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var e=function(a){var b=document.createElement("span");b.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;");a.appendChild(b);var c=b.offsetWidth;a.removeChild(b);return c};h.prototype.select=function(a){var b=a.selectedX;var c=a.selectedPoints;var d=f(a.dygraph,b,c,this.one_em_width_);this.legend_div_.innerHTML=d};h.prototype.deselect=function(a){var c=e(this.legend_div_);this.one_em_width_=c;var b=f(a.dygraph,undefined,undefined,c);this.legend_div_.innerHTML=b};h.prototype.didDrawChart=function(a){this.deselect(a)};h.prototype.predraw=function(a){if(!this.is_generated_div_){return}a.dygraph.graphDiv.appendChild(this.legend_div_);var b=a.dygraph.plotter_.area;this.legend_div_.style.left=b.x+b.w-a.dygraph.getOption("labelsDivWidth")-1+"px";this.legend_div_.style.top=b.y+"px"};h.prototype.destroy=function(){this.legend_div_=null};var f=function(c,M,Q,U){if(c.getOption("showLabelsOnHighlight")!==true){return""}var I,G,i,L,F,P;var a=c.getLabels();if(typeof(M)==="undefined"){if(c.getOption("legend")!="always"){return""}G=c.getOption("labelsSeparateLines");I="";for(i=1;i<a.length;i++){var K=c.getPropertiesForSeries(a[i]);if(!K.visible){continue}if(I!==""){I+=(G?"<br/>":" ")}P=c.getOption("strokePattern",a[i]);F=g(P,K.color,U);I+="<span style='font-weight: bold; color: "+K.color+";'>"+F+" "+a[i]+"</span>"}return I}var J=c.optionsViewForAxis_("x");var N=J("valueFormatter");I=N(M,J,a[0],c);if(I!==""){I+=":"}var d=[];var S=c.numAxes();for(i=0;i<S;i++){d[i]=c.optionsViewForAxis_("y"+(i?1+i:""))}var R=c.getOption("labelsShowZeroValues");G=c.getOption("labelsSeparateLines");var H=c.getHighlightSeries();for(i=0;i<Q.length;i++){var E=Q[i];if(E.yval===0&&!R){continue}if(!Dygraph.isOK(E.canvasy)){continue}if(G){I+="<br/>"}var K=c.getPropertiesForSeries(E.name);var O=d[K.axis-1];var b=O("valueFormatter");var V=b(E.yval,O,E.name,c);var T=(E.name==H)?" class='highlight'":"";I+="<span"+T+"> <b><span style='color: "+K.color+";'>"+E.name+"</span></b>:"+V+"</span>"}return I};var g=function(A,v,a){var z=(/MSIE/.test(navigator.userAgent)&&!window.opera);if(z){return"&mdash;"}if(!A||A.length<=1){return'<div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid '+v+';"></div>'}var t,u,y,d;var w=0,b=0;var c=[];var i;for(t=0;t<=A.length;t++){w+=A[t%A.length]}i=Math.floor(a/(w-A[0]));if(i>1){for(t=0;t<A.length;t++){c[t]=A[t]/a}b=c.length}else{i=1;for(t=0;t<A.length;t++){c[t]=A[t]/w}b=c.length+1}var j="";for(u=0;u<i;u++){for(t=0;t<b;t+=2){y=c[t%c.length];if(t<A.length){d=c[(t+1)%c.length]}else{d=0}j+='<div style="display: inline-block; position: relative; bottom: .5ex; margin-right: '+d+"em; padding-left: "+y+"em; height: 1px; border-bottom: 2px solid "+v+';"></div>'}}return j};return h})();Dygraph.PLUGINS.push(Dygraph.Plugins.Legend,Dygraph.Plugins.Axes,Dygraph.Plugins.ChartLabels,Dygraph.Plugins.Annotations,Dygraph.Plugins.Grid);